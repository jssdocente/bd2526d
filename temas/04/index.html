<!DOCTYPE html><html lang="es" class="no-js"><head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://jssdocente.github.io/bd2526/temas/04/index.html">
      
      
        <link rel="prev" href="../03_1eval/Repaso_RA2.html">
      
      
        <link rel="next" href="actividades.html">
      
      
        
      
      
      <link rel="icon" href="../../imagenes/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.1">
    
    
      
        <title>Inicio - Bases de Datos - Curso 25/26</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.484c7ddc.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.ab4e12ef.min.css">
      
      

  
  
  
  
  <style>:root{--md-annotation-icon:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2024%2024%22%3E%3Cpath%20d%3D%22M17%2013h-4v4h-2v-4H7v-2h4V7h2v4h4m-5-9A10%2010%200%200%200%202%2012a10%2010%200%200%200%2010%2010%2010%2010%200%200%200%2010-10A10%2010%200%200%200%2012%202%22/%3E%3C/svg%3E');}</style>


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&amp;display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../extra/css/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  <link href="../../assets/stylesheets/glightbox.min.css" rel="stylesheet"><script src="../../assets/javascripts/glightbox.min.js"></script><style id="glightbox-style">
            html.glightbox-open { overflow: initial; height: 100%; }
            .gslide-title { margin-top: 0px; user-select: text; }
            .gslide-desc { color: #666; user-select: text; }
            .gslide-image img { background: white; }
            .gscrollbar-fixer { padding-right: 15px; }
            .gdesc-inner { font-size: 0.75rem; }
            body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color); }
            body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color); }
            body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color); }
        </style></head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="light-blue" data-md-color-accent="Teal">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#sql-dml-consultas-basicas" class="md-skip">
          Saltar a contenido
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Cabecera">
    <a href="../../index.html" title="Bases de Datos - Curso 25/26" class="md-header__button md-logo" aria-label="Bases de Datos - Curso 25/26" data-md-component="logo">
      
  <img src="../../imagenes/logofp.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"></path></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Bases de Datos - Curso 25/26
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Inicio
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="light-blue" data-md-color-accent="Teal" aria-label="Cambiar a modo noche" type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Cambiar a modo noche" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6m0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4M7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"></path></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="light-blue" data-md-color-accent="Teal" aria-label="Cambiar a modo día" type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Cambiar a modo día" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3"></path></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Búsqueda" placeholder="Búsqueda" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"></path></svg>
      </label>
      <nav class="md-search__options" aria-label="Buscar">
        
        <button type="reset" class="md-search__icon md-icon" title="Limpiar" aria-label="Limpiar" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Inicializando búsqueda
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navegación" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../index.html" title="Bases de Datos - Curso 25/26" class="md-nav__button md-logo" aria-label="Bases de Datos - Curso 25/26" data-md-component="logo">
      
  <img src="../../imagenes/logofp.png" alt="logo">

    </a>
    Bases de Datos - Curso 25/26
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../index.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Inicio
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../01/index.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    01 - Sistemas de Almacenamiento
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3">
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    02.A - Diseño conceptual: Modelo E/R
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    02.A - Diseño conceptual: Modelo E/R
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../02/index.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Inicio
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../02/2.1-ModeloER.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    2.1 El modelo ER
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../02/2.2-Restricciones.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    2.2 Restricciones
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../02/2.3-Modelo-extendido.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    2.3 Modelo Extendido
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../02/2.A-Actividades.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Actividades
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4">
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    02.B - Diseño Lógico: Relacional
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    02.B - Diseño Lógico: Relacional
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../02B/index.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Inicio
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../02B/2.4-ModeloRelacional.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    2.4 El modelo relacional
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../02B/2.B-Actividades.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Actividades
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5">
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    02.C - Diseño Lógico: Transformación
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    02.C - Diseño Lógico: Transformación
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../02C/index.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Inicio
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../02C/2.5-Transformacion.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    2.4 Transformación ER a MR
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../02C/2.C-Actividades.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Actividades
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6">
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    03 - Diseño físico: DDL y DCL
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    03 - Diseño físico: DDL y DCL
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../03/index.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Inicio
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../03/3.1-DisenoFisico-DDL.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    3.1 Diseño físico: DDL
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../03/Actividades-DDL.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Actividades DDL
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7">
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    1 Evaluación
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            
  
    1 Evaluación
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_1">
        
          
          <label class="md-nav__link" for="__nav_7_1" id="__nav_7_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    UT2-ABC
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_7_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    UT2-ABC
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../03_1eval/Repaso_RA6.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Resumen
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../03_1eval/UT2.abc_Actividades-Repaso.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Activd.Repaso UT2ABC
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_2">
        
          
          <label class="md-nav__link" for="__nav_7_2" id="__nav_7_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    UT3
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_7_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    UT3
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../03_1eval/Repaso_RA2.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Resumen
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" checked>
        
          
          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    04 - SQL (DML): Consultas Básicas
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            
  
    04 - SQL (DML): Consultas Básicas
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    Inicio
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="index.html" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    Inicio
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Tabla de contenidos">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Tabla de contenidos
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#algebra-relacional" class="md-nav__link">
    <span class="md-ellipsis">
      
        Álgebra Relacional
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Álgebra Relacional">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#operaciones" class="md-nav__link">
    <span class="md-ellipsis">
      
        Operaciones
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#consultas-sql" class="md-nav__link">
    <span class="md-ellipsis">
      
        Consultas SQL
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Consultas SQL">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#proyeccion" class="md-nav__link">
    <span class="md-ellipsis">
      
        Proyección
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#funciones" class="md-nav__link">
    <span class="md-ellipsis">
      
        Funciones
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ordenando-y-limitando" class="md-nav__link">
    <span class="md-ellipsis">
      
        Ordenando y Limitando
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#seleccion" class="md-nav__link">
    <span class="md-ellipsis">
      
        Selección
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#uniendo-tablas" class="md-nav__link">
    <span class="md-ellipsis">
      
        Uniendo Tablas
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Uniendo Tablas">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#producto-cartesiano" class="md-nav__link">
    <span class="md-ellipsis">
      
        Producto cartesiano
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#composicion-interna-inner-join" class="md-nav__link">
    <span class="md-ellipsis">
      
        Composición interna (INNER JOIN)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#composicion-externa" class="md-nav__link">
    <span class="md-ellipsis">
      
        Composición externa
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#operadores-de-conjuntos" class="md-nav__link">
    <span class="md-ellipsis">
      
        Operadores de conjuntos
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#referencias" class="md-nav__link">
    <span class="md-ellipsis">
      
        Referencias
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="actividades.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Actividades
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9">
        
          
          <label class="md-nav__link" for="__nav_9" id="__nav_9_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    05 - DML: Consultas Avanzadas
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9">
            <span class="md-nav__icon md-icon"></span>
            
  
    05 - DML: Consultas Avanzadas
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../05/index.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Inicio
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../05/actividades.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Actividades
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Tabla de contenidos">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Tabla de contenidos
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#algebra-relacional" class="md-nav__link">
    <span class="md-ellipsis">
      
        Álgebra Relacional
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Álgebra Relacional">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#operaciones" class="md-nav__link">
    <span class="md-ellipsis">
      
        Operaciones
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#consultas-sql" class="md-nav__link">
    <span class="md-ellipsis">
      
        Consultas SQL
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Consultas SQL">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#proyeccion" class="md-nav__link">
    <span class="md-ellipsis">
      
        Proyección
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#funciones" class="md-nav__link">
    <span class="md-ellipsis">
      
        Funciones
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ordenando-y-limitando" class="md-nav__link">
    <span class="md-ellipsis">
      
        Ordenando y Limitando
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#seleccion" class="md-nav__link">
    <span class="md-ellipsis">
      
        Selección
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#uniendo-tablas" class="md-nav__link">
    <span class="md-ellipsis">
      
        Uniendo Tablas
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Uniendo Tablas">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#producto-cartesiano" class="md-nav__link">
    <span class="md-ellipsis">
      
        Producto cartesiano
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#composicion-interna-inner-join" class="md-nav__link">
    <span class="md-ellipsis">
      
        Composición interna (INNER JOIN)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#composicion-externa" class="md-nav__link">
    <span class="md-ellipsis">
      
        Composición externa
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#operadores-de-conjuntos" class="md-nav__link">
    <span class="md-ellipsis">
      
        Operadores de conjuntos
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#referencias" class="md-nav__link">
    <span class="md-ellipsis">
      
        Referencias
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
                



  


  <nav class="md-path" aria-label="Navegación">
    <ol class="md-path__list">
      
        
  
  
    <li class="md-path__item">
      <a href="../../index.html" class="md-path__link">
        
  <span class="md-ellipsis">
    Inicio
  </span>

      </a>
    </li>
  

      
      
        
  
  
    
    
      <li class="md-path__item">
        <a href="index.html" class="md-path__link">
          
  <span class="md-ellipsis">
    04 - SQL (DML): Consultas Básicas
  </span>

        </a>
      </li>
    
  

      
    </ol>
  </nav>

              
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="sql-dml-consultas-basicas"><strong>SQL (DML). Consultas Básicas</strong><a class="headerlink" href="#sql-dml-consultas-basicas" title="Permanent link">¶</a></h1>
<div class="admonition info">
<p class="admonition-title">Información de la unidad</p>
<div class="tabbed-set tabbed-alternate" data-tabs="1:2"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio"><input id="__tabbed_1_2" name="__tabbed_1" type="radio"><div class="tabbed-labels"><label for="__tabbed_1_1">Contenidos</label><label for="__tabbed_1_2">Propuesta didáctica</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>Realización de consultas:</p>
<ul>
<li>Proyección, selección y ordenación de registros.</li>
<li>Operadores. Operadores de comparación. Operadores lógicos.</li>
<li>Composiciones internas.</li>
<li>Composiciones externas.</li>
<li>Consultas de resumen.</li>
<li>Agrupamiento de registros.</li>
</ul>
<p>Bases de datos relacionales:</p>
<ul>
<li>Vistas.</li>
</ul>
</div>
<div class="tabbed-block">
<p>Una vez conocido el modelo relacional, en esta unidad vamos a comenzar a trabajar el RA3 "<strong>Consulta la información almacenada en una base de datos empleando asistentes, herramientas gráficas y el lenguaje de manipulación de datos.</strong>",</p>
<p>Criterios de evaluación</p>
<ul>
<li><strong>CE3a</strong>: Se han identificado las herramientas y sentencias para realizar consultas.</li>
<li><strong>CE3b</strong>: Se han realizado consultas simples sobre una tabla.</li>
<li><strong>CE3c</strong>: Se han realizado consultas sobre el contenido de varias tablas mediante composiciones internas.</li>
<li><strong>CE3d</strong>: Se han realizado consultas sobre el contenido de varias tablas mediante composiciones externas.definición y control de datos.</li>
<li><strong>CE3e</strong>: Se han realizado consultas resumen.</li>
<li><strong>CE2f</strong>: Se han creado vistas.</li>
</ul>
</div>
</div>
</div>
</div>
<div class="admonition info">
<p class="admonition-title">Bases de datos recursos</p>
<p>Aquí tienes los enlaces a las bases de datos de recursos para esta unidad:</p>
<ul>
<li><a href="res/liga_futbol.html">Liga de Fútbol</a></li>
<li><a href="res/gestion_ventas.html">Gestión de Ventas</a></li>
<li><a href="res/jardineria.html">Jardinería</a></li>
<li><a href="res/UniversidadA.html">Universidad A</a></li>
<li><a href="res/UniversidadB.html">Universidad B</a></li>
</ul>
</div>
<h2 id="algebra-relacional">Álgebra Relacional<a class="headerlink" href="#algebra-relacional" title="Permanent link">¶</a></h2>
<p>El álgebra relacional es un lenguaje formal utilizado para realizar consultas y operaciones sobre bases de datos relacionales. Fue propuesto por <em>Edgar F. Codd</em> en 1970 como parte de su trabajo en la teoría de bases de datos relacionales. En lugar de ser un lenguaje de programación como SQL, es un conjunto de operaciones matemáticas que permiten manipular conjuntos de datos (relaciones o tablas) de una manera lógica y estructurada.</p>
<h3 id="operaciones">Operaciones<a class="headerlink" href="#operaciones" title="Permanent link">¶</a></h3>
<p>Las operaciones que podemos realizar son:</p>
<table>
<thead>
<tr>
<th>Operación</th>
<th>Notación</th>
<th>Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Selección</strong></td>
<td><strong>σ</strong><sub>condición</sub>(Relación)</td>
<td>Selecciona las tuplas que cumplen una condición específica.</td>
</tr>
<tr>
<td><strong>Proyección</strong></td>
<td><strong>π</strong><sub>atributos</sub>(Relación)</td>
<td>Devuelve una nueva relación con solo las columnas seleccionadas.</td>
</tr>
<tr>
<td><strong>Unión</strong></td>
<td>Relación1 <strong>∪</strong> Relación2</td>
<td>Combina las tuplas de dos relaciones con el mismo esquema.</td>
</tr>
<tr>
<td><strong>Intersección</strong></td>
<td>Relación1 <strong>∩</strong> Relación2</td>
<td>Devuelve las tuplas que están en ambas relaciones.</td>
</tr>
<tr>
<td><strong>Diferencia</strong></td>
<td>Relación1 <strong>−</strong> Relación2</td>
<td>Devuelve las tuplas que están en la primera relación pero no en la segunda.</td>
</tr>
<tr>
<td><strong>Producto cartesiano</strong></td>
<td>Relación1 <strong>×</strong> Relación2</td>
<td>Combina cada tupla de la primera relación con cada tupla de la segunda.</td>
</tr>
<tr>
<td><strong>Renombrar</strong></td>
<td><strong>ρ</strong><sub>nuevoNombre</sub>(Relación)</td>
<td>Cambia el nombre de una relación o de sus atributos.</td>
</tr>
<tr>
<td><strong>Join natural</strong></td>
<td>Relación1 <strong>⨝</strong> Relación2</td>
<td>Une dos relaciones en función de un atributo común de forma implícita.</td>
</tr>
<tr>
<td><strong>Join equi</strong></td>
<td>Relación1 <strong>⨝</strong><sub>condición</sub> Relación2</td>
<td>Une dos relaciones en función de una condición, normalmente una igualdad.</td>
</tr>
</tbody>
</table>
<p><strong>Ejemplos Prácticos</strong></p>
<p>A continuación se muestran ejemplos detallados de cada operación. Utilizaremos las siguientes tablas de datos como punto de partida:</p>
<h4 id="datos-de-referencia">Datos de Referencia<a class="headerlink" href="#datos-de-referencia" title="Permanent link">¶</a></h4>
<div class="tabbed-set tabbed-alternate" data-tabs="2:4"><input checked="checked" id="__tabbed_2_1" name="__tabbed_2" type="radio"><input id="__tabbed_2_2" name="__tabbed_2" type="radio"><input id="__tabbed_2_3" name="__tabbed_2" type="radio"><input id="__tabbed_2_4" name="__tabbed_2" type="radio"><div class="tabbed-labels"><label for="__tabbed_2_1">Empleados</label><label for="__tabbed_2_2">Departamentos</label><label for="__tabbed_2_3">GrupoA</label><label for="__tabbed_2_4">GrupoB</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<table>
<thead>
<tr>
<th>ID</th>
<th>Nombre</th>
<th>DeptID</th>
<th>Salario</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>Ana</td>
<td>10</td>
<td>2500</td>
</tr>
<tr>
<td>2</td>
<td>Luis</td>
<td>10</td>
<td>3000</td>
</tr>
<tr>
<td>3</td>
<td>Eva</td>
<td>20</td>
<td>2800</td>
</tr>
<tr>
<td>4</td>
<td>Juan</td>
<td>30</td>
<td>2200</td>
</tr>
</tbody>
</table>
</div>
<div class="tabbed-block">
<table>
<thead>
<tr>
<th>DeptID</th>
<th>NombreDept</th>
</tr>
</thead>
<tbody>
<tr>
<td>10</td>
<td>Ventas</td>
</tr>
<tr>
<td>20</td>
<td>Marketing</td>
</tr>
<tr>
<td>30</td>
<td>Logística</td>
</tr>
</tbody>
</table>
</div>
<div class="tabbed-block">
<p><em>(Para operaciones de conjuntos)</em></p>
<table>
<thead>
<tr>
<th>ID</th>
<th>Nombre</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>Ana</td>
</tr>
<tr>
<td>2</td>
<td>Luis</td>
</tr>
</tbody>
</table>
</div>
<div class="tabbed-block">
<p><em>(Para operaciones de conjuntos)</em></p>
<table>
<thead>
<tr>
<th>ID</th>
<th>Nombre</th>
</tr>
</thead>
<tbody>
<tr>
<td>2</td>
<td>Luis</td>
</tr>
<tr>
<td>5</td>
<td>Pedro</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<hr>
<h4 id="operaciones-simples">Operaciones simples<a class="headerlink" href="#operaciones-simples" title="Permanent link">¶</a></h4>
<h5 id="operaciones-basicas-y-de-esquema">Operaciones Básicas y de Esquema<a class="headerlink" href="#operaciones-basicas-y-de-esquema" title="Permanent link">¶</a></h5>
<div class="tabbed-set tabbed-alternate" data-tabs="3:3"><input checked="checked" id="__tabbed_3_1" name="__tabbed_3" type="radio"><input id="__tabbed_3_2" name="__tabbed_3" type="radio"><input id="__tabbed_3_3" name="__tabbed_3" type="radio"><div class="tabbed-labels"><label for="__tabbed_3_1">Selección (<strong>σ</strong>)</label><label for="__tabbed_3_2">Proyección (<strong>π</strong>)</label><label for="__tabbed_3_3">Renombrar (<strong>ρ</strong>)</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p><em>Objetivo:</em> Obtener los empleados con un salario superior a 2600.</p>
<p><strong>σ</strong><sub>Salario &gt; 2600</sub>(Empleados)</p>
<table>
<thead>
<tr>
<th>ID</th>
<th>Nombre</th>
<th>DeptID</th>
<th>Salario</th>
</tr>
</thead>
<tbody>
<tr>
<td>2</td>
<td>Luis</td>
<td>10</td>
<td>3000</td>
</tr>
<tr>
<td>3</td>
<td>Eva</td>
<td>20</td>
<td>2800</td>
</tr>
</tbody>
</table>
</div>
<div class="tabbed-block">
<p><em>Objetivo:</em> Mostrar solo el nombre y el salario de los empleados.</p>
<p><strong>π</strong><sub>Nombre, Salario</sub>(Empleados)</p>
<table>
<thead>
<tr>
<th>Nombre</th>
<th>Salario</th>
</tr>
</thead>
<tbody>
<tr>
<td>Ana</td>
<td>2500</td>
</tr>
<tr>
<td>Luis</td>
<td>3000</td>
</tr>
<tr>
<td>Eva</td>
<td>2800</td>
</tr>
<tr>
<td>Juan</td>
<td>2200</td>
</tr>
</tbody>
</table>
</div>
<div class="tabbed-block">
<p><em>Objetivo:</em> Cambiar el nombre de la relación <code>Departamentos</code> a <code>Areas</code> y sus columnas a <code>Cod</code> y <code>Desc</code>.</p>
<p><strong>ρ</strong><sub>Areas(Cod, Desc)</sub>(Departamentos)</p>
<table>
<thead>
<tr>
<th>Cod</th>
<th>Desc</th>
</tr>
</thead>
<tbody>
<tr>
<td>10</td>
<td>Ventas</td>
</tr>
<tr>
<td>20</td>
<td>Marketing</td>
</tr>
<tr>
<td>30</td>
<td>Logística</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<h5 id="operaciones-de-conjuntos">Operaciones de Conjuntos<a class="headerlink" href="#operaciones-de-conjuntos" title="Permanent link">¶</a></h5>
<div class="tabbed-set tabbed-alternate" data-tabs="4:4"><input checked="checked" id="__tabbed_4_1" name="__tabbed_4" type="radio"><input id="__tabbed_4_2" name="__tabbed_4" type="radio"><input id="__tabbed_4_3" name="__tabbed_4" type="radio"><input id="__tabbed_4_4" name="__tabbed_4" type="radio"><div class="tabbed-labels"><label for="__tabbed_4_1">Unión (<strong>∪</strong>)</label><label for="__tabbed_4_2">Intersección (<strong>∩</strong>)</label><label for="__tabbed_4_3">Diferencia (<strong>−</strong>)</label><label for="__tabbed_4_4">Producto Cartesiano (<strong>×</strong>)</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p><em>Objetivo:</em> Unir los integrantes del GrupoA y GrupoB (sin duplicados).</p>
<p>GrupoA <strong>∪</strong> GrupoB</p>
<table>
<thead>
<tr>
<th>ID</th>
<th>Nombre</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>Ana</td>
</tr>
<tr>
<td>2</td>
<td>Luis</td>
</tr>
<tr>
<td>5</td>
<td>Pedro</td>
</tr>
</tbody>
</table>
</div>
<div class="tabbed-block">
<p><em>Objetivo:</em> Encontrar quiénes están en ambos grupos.</p>
<p>GrupoA <strong>∩</strong> GrupoB</p>
<table>
<thead>
<tr>
<th>ID</th>
<th>Nombre</th>
</tr>
</thead>
<tbody>
<tr>
<td>2</td>
<td>Luis</td>
</tr>
</tbody>
</table>
</div>
<div class="tabbed-block">
<p><em>Objetivo:</em> Personas que están en el GrupoA pero <strong>no</strong> en el GrupoB.</p>
<p>GrupoA <strong>−</strong> GrupoB</p>
<table>
<thead>
<tr>
<th>ID</th>
<th>Nombre</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>Ana</td>
</tr>
</tbody>
</table>
<p><em>(Luis se elimina porque está en ambos)</em></p>
</div>
<div class="tabbed-block">
<p><em>Objetivo:</em> Combinar cada fila del GrupoA con cada fila de Departamentos.
<em>(Total filas = 2 filas GrupoA × 3 filas Departamentos = 6 filas)</em></p>
<p>GrupoA <strong>×</strong> Departamentos</p>
<table>
<thead>
<tr>
<th>ID</th>
<th>Nombre</th>
<th>DeptID</th>
<th>NombreDept</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>Ana</td>
<td>10</td>
<td>Ventas</td>
</tr>
<tr>
<td>1</td>
<td>Ana</td>
<td>20</td>
<td>Marketing</td>
</tr>
<tr>
<td>1</td>
<td>Ana</td>
<td>30</td>
<td>Logística</td>
</tr>
<tr>
<td>2</td>
<td>Luis</td>
<td>10</td>
<td>Ventas</td>
</tr>
<tr>
<td>2</td>
<td>Luis</td>
<td>20</td>
<td>Marketing</td>
</tr>
<tr>
<td>2</td>
<td>Luis</td>
<td>30</td>
<td>Logística</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<h5 id="composiciones">Composiciones<a class="headerlink" href="#composiciones" title="Permanent link">¶</a></h5>
<div class="tabbed-set tabbed-alternate" data-tabs="5:2"><input checked="checked" id="__tabbed_5_1" name="__tabbed_5" type="radio"><input id="__tabbed_5_2" name="__tabbed_5" type="radio"><div class="tabbed-labels"><label for="__tabbed_5_1">Join Natural (<strong>⨝</strong>)</label><label for="__tabbed_5_2">Join Equi (<strong>⨝</strong>)</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p><em>Objetivo:</em> Unir <code>Empleados</code> y <code>Departamentos</code> usando la columna común <code>DeptID</code>.</p>
<p>Empleados <strong>⨝</strong> Departamentos</p>
<table>
<thead>
<tr>
<th>ID</th>
<th>Nombre</th>
<th>Salario</th>
<th>DeptID</th>
<th>NombreDept</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>Ana</td>
<td>2500</td>
<td>10</td>
<td>Ventas</td>
</tr>
<tr>
<td>2</td>
<td>Luis</td>
<td>3000</td>
<td>10</td>
<td>Ventas</td>
</tr>
<tr>
<td>3</td>
<td>Eva</td>
<td>2800</td>
<td>20</td>
<td>Marketing</td>
</tr>
<tr>
<td>4</td>
<td>Juan</td>
<td>2200</td>
<td>30</td>
<td>Logística</td>
</tr>
</tbody>
</table>
</div>
<div class="tabbed-block">
<p><em>Objetivo:</em> Unir tablas especificando la igualdad explícitamente (ej: <code>Empleados.DeptID = Departamentos.DeptID</code>).
<em>Nota: A diferencia del natural, el equi-join estándar suele conservar ambas columnas de unión.</em></p>
<p>Empleados <strong>⨝</strong><sub>Empleados.DeptID = Departamentos.DeptID</sub> Departamentos</p>
<table>
<thead>
<tr>
<th>ID</th>
<th>Nombre</th>
<th>DeptID</th>
<th>Salario</th>
<th>DeptID</th>
<th>NombreDept</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>Ana</td>
<td>10</td>
<td>2500</td>
<td>10</td>
<td>Ventas</td>
</tr>
<tr>
<td>2</td>
<td>Luis</td>
<td>10</td>
<td>3000</td>
<td>10</td>
<td>Ventas</td>
</tr>
<tr>
<td>3</td>
<td>Eva</td>
<td>20</td>
<td>2800</td>
<td>20</td>
<td>Marketing</td>
</tr>
<tr>
<td>4</td>
<td>Juan</td>
<td>30</td>
<td>2200</td>
<td>30</td>
<td>Logística</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<h5 id="operaciones-combinadas">Operaciones Combinadas<a class="headerlink" href="#operaciones-combinadas" title="Permanent link">¶</a></h5>
<div class="tabbed-set tabbed-alternate" data-tabs="6:2"><input checked="checked" id="__tabbed_6_1" name="__tabbed_6" type="radio"><input id="__tabbed_6_2" name="__tabbed_6" type="radio"><div class="tabbed-labels"><label for="__tabbed_6_1">Selección y Proyección</label><label for="__tabbed_6_2">Join y Selección</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p><em>Objetivo:</em> Obtener solo el nombre de los empleados del departamento 10.
<em>Lógica:</em> Primero seleccionamos (<strong>σ</strong>) las filas y de ese resultado, nos quedamos (<strong>π</strong>) con la columna nombre.</p>
<p><strong>π</strong><sub>Nombre</sub>(<strong>σ</strong><sub>DeptID = 10</sub>(Empleados))</p>
<p><em>Paso 1: Selección (DeptID = 10)</em></p>
<table>
<thead>
<tr>
<th>ID</th>
<th>Nombre</th>
<th>DeptID</th>
<th>Salario</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>Ana</td>
<td>10</td>
<td>2500</td>
</tr>
<tr>
<td>2</td>
<td>Luis</td>
<td>10</td>
<td>3000</td>
</tr>
</tbody>
</table>
<p><em>Paso 2: Proyección (Nombre)</em></p>
<table>
<thead>
<tr>
<th>Nombre</th>
</tr>
</thead>
<tbody>
<tr>
<td>Ana</td>
</tr>
<tr>
<td>Luis</td>
</tr>
</tbody>
</table>
</div>
<div class="tabbed-block">
<p><em>Objetivo:</em> Obtener los datos completos de empleados del departamento 'Ventas'.
<em>Lógica:</em> Primero unimos (<strong>⨝</strong>) las tablas para tener toda la info, y luego filtramos (<strong>σ</strong>) por el nombre del departamento.</p>
<p><strong>σ</strong><sub>NombreDept = 'Ventas'</sub>(Empleados <strong>⨝</strong> Departamentos)</p>
<p><em>Paso 1: Join Natural</em> (Resultado intermedio)</p>
<table>
<thead>
<tr>
<th>ID</th>
<th>Nombre</th>
<th>Salario</th>
<th>DeptID</th>
<th>NombreDept</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>Ana</td>
<td>2500</td>
<td>10</td>
<td>Ventas</td>
</tr>
<tr>
<td>2</td>
<td>Luis</td>
<td>3000</td>
<td>10</td>
<td>Ventas</td>
</tr>
<tr>
<td>3</td>
<td>Eva</td>
<td>2800</td>
<td>20</td>
<td>Marketing</td>
</tr>
<tr>
<td>4</td>
<td>Juan</td>
<td>2200</td>
<td>30</td>
<td>Logística</td>
</tr>
</tbody>
</table>
<p><em>Paso 2: Selección (NombreDept = 'Ventas')</em></p>
<table>
<thead>
<tr>
<th>ID</th>
<th>Nombre</th>
<th>Salario</th>
<th>DeptID</th>
<th>NombreDept</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>Ana</td>
<td>2500</td>
<td>10</td>
<td>Ventas</td>
</tr>
<tr>
<td>2</td>
<td>Luis</td>
<td>3000</td>
<td>10</td>
<td>Ventas</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<p>Estas operaciones forman la base teórica de cómo las bases de datos relacionales manipulan los datos y son fundamentales para comprender el funcionamiento de lenguajes como SQL.</p>
<details class="note">
<summary>Video explicativo</summary>
<p><iframe width="780" height="440" src="https://www.youtube.com/embed/YkCDSdBECW0" title="Fundamentos de BD. Consultas con Álgebra Relacional." frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe></p>
</details>
<h2 id="consultas-sql">Consultas SQL<a class="headerlink" href="#consultas-sql" title="Permanent link">¶</a></h2>
<div class="admonition info">
<p class="admonition-title">Preparando los datos</p>
<p>La base de datos que vamos a utilizar a lo largo de los apuntes gestiona la liga de futbol.</p>
<p><a class="glightbox" data-type="image" data-width="100%" data-height="auto" href="res/ligaER.png" data-desc-position="bottom"><img alt="liga_futbol" src="res/ligaER.png"></a></p>
<p>A partir del <a href="res/liga_futbol.sql">script DDL</a> puedes importar los datos a través de DbBearer o cualquier otro gestor de base de datos.</p>
</div>
<p>En el tema anterior estudiamos la parte DDL del lenguaje. En este tema y las siguientes nos vamos a centrar en las consultas, que formarían parte de DML, y más en concreto de DQL (<em>Data Query Language</em>). Para ello, utilizaremos la sentencia <code>SELECT</code> definiendo consultas que pueden ocupar una línea o varias decenas, que acceden a una única tabla (o vista), o a múltiples tablas combinadas mediante el uso de <em>joins</em>, e incluso que utiliza diversos esquemas dentro de la misma base de datos.</p>
<p>Así pues, entremos en detalle en la sentencia <strong><code>SELECT ... FROM</code></strong>. Su sintaxis completa, con las opciones más frecuentes, tanto para <a href="https://mariadb.com/kb/en/select/">MariaDB</a> como para <em>PostgreSQL</em> es:</p>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="k">SELECT</span><span class="w"> </span><span class="err">{</span><span class="o">*</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="p">[</span><span class="k">DISTINCT</span><span class="p">]</span><span class="w"> </span><span class="err">{</span><span class="n">columna</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">expresión</span><span class="err">}</span><span class="w"> </span><span class="p">[[</span><span class="k">AS</span><span class="p">]</span><span class="w"> </span><span class="k">alias</span><span class="p">],</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="err">}</span><span class="w"> </span>
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="k">FROM</span><span class="w"> </span><span class="n">tabla</span><span class="w"> </span>
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="w">    </span><span class="p">[</span><span class="k">WHERE</span><span class="w"> </span><span class="n">condición</span><span class="p">]</span><span class="w"> </span>
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="w">    </span><span class="p">[</span><span class="k">GROUP</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">col1</span><span class="w"> </span><span class="p">[,</span><span class="w"> </span><span class="n">col2</span><span class="p">]</span><span class="w"> </span><span class="p">...]</span><span class="w"> </span>
</span><span id="__span-0-5"><a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="w">    </span><span class="p">[</span><span class="k">HAVING</span><span class="w"> </span><span class="n">predicado</span><span class="w"> </span><span class="n">grupo</span><span class="p">]</span><span class="w"> </span>
</span><span id="__span-0-6"><a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="w">    </span><span class="p">[</span><span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">col</span><span class="o">-</span><span class="n">n</span><span class="o">|</span><span class="w"> </span><span class="n">pos</span><span class="o">-</span><span class="n">n</span><span class="w"> </span><span class="p">[</span><span class="k">ASC</span><span class="o">|</span><span class="k">DESC</span><span class="p">]</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">col</span><span class="o">-</span><span class="n">m</span><span class="o">|</span><span class="w"> </span><span class="n">pos</span><span class="o">-</span><span class="n">m</span><span class="w"> </span><span class="p">[</span><span class="k">ASC</span><span class="o">|</span><span class="n">DES</span><span class="p">]</span><span class="err">…</span><span class="p">]</span><span class="w"> </span>
</span><span id="__span-0-7"><a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="w">    </span><span class="p">[</span><span class="k">LIMIT</span><span class="w"> </span><span class="err">{</span><span class="p">[</span><span class="k">offset</span><span class="p">,]</span><span class="w"> </span><span class="k">row_count</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">row_count</span><span class="w"> </span><span class="k">OFFSET</span><span class="w"> </span><span class="k">offset</span><span class="err">}</span><span class="p">];</span>
</span></code></pre></div>
<p>En todo consulta siempre deberemos indicar qué datos queremos recuperar y de dónde lo haremos. Tras ejecutar una consulta obtendremos una tabla de datos, que puede tener una o varias columnas y ninguna, una o varias filas.</p>
<div class="admonition info">
<p class="admonition-title">Formato</p>
<p>A la hora de escribir una consulta, podemos dividirla en varias líneas para facilitar su legibilidad. Recuerda que hasta que no encuentre el carácter de <code>;</code>, el intérprete SQL no ejecutará la consulta.</p>
<p>Además, podemos utilizar espacios o tabuladores para indentar el código:</p>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="c1">-- Todo en una línea </span>
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="k">select</span><span class="w"> </span><span class="n">nombre</span><span class="p">,</span><span class="w"> </span><span class="n">apellido</span><span class="p">,</span><span class="w"> </span><span class="n">fechaNacimiento</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">Jugador</span><span class="w"> </span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">fechaNacimiento</span><span class="w"> </span><span class="k">desc</span><span class="p">;</span><span class="w"> </span>
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a>
</span><span id="__span-1-4"><a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a><span class="c1">-- En líneas separadas </span>
</span><span id="__span-1-5"><a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a><span class="k">select</span><span class="w"> </span><span class="n">nombre</span><span class="p">,</span><span class="w"> </span><span class="n">apellido</span><span class="p">,</span><span class="w"> </span><span class="n">fechaNacimiento</span><span class="w"> </span>
</span><span id="__span-1-6"><a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a><span class="k">from</span><span class="w"> </span><span class="n">Jugador</span><span class="w"> </span>
</span><span id="__span-1-7"><a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">fechaNacimiento</span><span class="w"> </span><span class="k">desc</span><span class="p">;</span><span class="w"> </span>
</span><span id="__span-1-8"><a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a>
</span><span id="__span-1-9"><a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a><span class="c1">-- En líneas separadas, con atributos en diversas líneas </span>
</span><span id="__span-1-10"><a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a><span class="k">select</span><span class="w"> </span><span class="n">nombre</span><span class="p">,</span><span class="w"> </span>
</span><span id="__span-1-11"><a id="__codelineno-1-11" name="__codelineno-1-11" href="#__codelineno-1-11"></a><span class="w">    </span><span class="n">apellido</span><span class="p">,</span><span class="w"> </span>
</span><span id="__span-1-12"><a id="__codelineno-1-12" name="__codelineno-1-12" href="#__codelineno-1-12"></a><span class="w">    </span><span class="n">fechaNacimiento</span><span class="w"> </span>
</span><span id="__span-1-13"><a id="__codelineno-1-13" name="__codelineno-1-13" href="#__codelineno-1-13"></a><span class="k">from</span><span class="w"> </span><span class="n">Jugador</span><span class="w"> </span>
</span><span id="__span-1-14"><a id="__codelineno-1-14" name="__codelineno-1-14" href="#__codelineno-1-14"></a><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">fechaNacimiento</span><span class="w"> </span><span class="k">desc</span><span class="p">;</span>
</span></code></pre></div>
</div>
<h3 id="proyeccion">Proyección<a class="headerlink" href="#proyeccion" title="Permanent link">¶</a></h3>
<p>Para seleccionar campos utilizaremos bien <strong><code>*</code></strong> para indicar que queremos todas las columnas, o indicaremos de uno en uno el nombre de los campos que queremos recuperar;</p>
<p>Para renombrar las columnas obtenidas, tras cada columna, mediante <strong><code>as</code></strong> podemos indicarle un alias a cada una de ellas:</p>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="k">SELECT</span><span class="w"> </span><span class="n">nombre</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">Nombre_Completo</span><span class="p">,</span><span class="w"> </span><span class="n">añoFundacion</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">Fundado</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">Equipo</span><span class="w"> </span><span class="k">LIMIT</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span>
</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align: left;">Nombre_Completo</th>
<th style="text-align: left;">Fundado</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">Real Madrid CF</td>
<td style="text-align: left;">1902</td>
</tr>
<tr>
<td style="text-align: left;">FC Barcelona</td>
<td style="text-align: left;">1899</td>
</tr>
<tr>
<td style="text-align: left;">Atletico de Madrid</td>
<td style="text-align: left;">1903</td>
</tr>
</tbody>
</table>
<h4 id="duplicados">Duplicados<a class="headerlink" href="#duplicados" title="Permanent link">¶</a></h4>
<p>Si realizamos la siguiente consulta sobre la tabla <code>Jugador</code>, obtendremos todos las posiciones de los jugadores. Como podéis observar, aparecen repetidas, porque obtenemos una fila por jugador existente en la tabla:</p>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="k">SELECT</span><span class="w"> </span><span class="n">posicion</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">Jugador</span><span class="w"> </span><span class="k">LIMIT</span><span class="w"> </span><span class="mi">7</span><span class="p">;</span>
</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align: left;">posicion</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">Portero</td>
</tr>
<tr>
<td style="text-align: left;">Defensa</td>
</tr>
<tr>
<td style="text-align: left;">Defensa</td>
</tr>
<tr>
<td style="text-align: left;">Defensa</td>
</tr>
<tr>
<td style="text-align: left;">Centrocampista</td>
</tr>
<tr>
<td style="text-align: left;">Delantero</td>
</tr>
<tr>
<td style="text-align: left;">Centrocampista</td>
</tr>
</tbody>
</table>
<p>Si nos interesa recuperar datos que no contengan repetidos, podemos emplear <strong><code>distinct</code></strong>:</p>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="k">SELECT</span><span class="w"> </span><span class="k">DISTINCT</span><span class="w"> </span><span class="n">posicion</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">Jugador</span><span class="p">;</span>
</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align: left;">posicion</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">Portero</td>
</tr>
<tr>
<td style="text-align: left;">Defensa</td>
</tr>
<tr>
<td style="text-align: left;">Centrocampista</td>
</tr>
<tr>
<td style="text-align: left;">Delantero</td>
</tr>
</tbody>
</table>
<h4 id="operaciones-aritmeticas">Operaciones aritméticas<a class="headerlink" href="#operaciones-aritmeticas" title="Permanent link">¶</a></h4>
<p>Cada vez que hacemos referencia a un campo o un valor, también podemos realizar operaciones aritméticas sobre el valor de los campos (<code>+</code>, <code>-</code>, <code>*</code>, <code>/</code>, <code>%</code>, ...)</p>
<p>Por ejemplo, mediante la siguiente consulta podemos obtener de cada jugador, su nombre y altura, y su altura en centímetros (multiplicando por 100):</p>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="k">SELECT</span><span class="w"> </span><span class="n">nombre</span><span class="p">,</span><span class="w"> </span><span class="n">altura</span><span class="p">,</span><span class="w"> </span><span class="n">altura</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">100</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">Altura_CM</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">Jugador</span><span class="w"> </span><span class="k">LIMIT</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span>
</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align: left;">nombre</th>
<th style="text-align: left;">altura</th>
<th style="text-align: left;">Altura_CM</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">Thibaut</td>
<td style="text-align: left;">2.00</td>
<td style="text-align: left;">200</td>
</tr>
<tr>
<td style="text-align: left;">Daniel</td>
<td style="text-align: left;">1.73</td>
<td style="text-align: left;">173</td>
</tr>
<tr>
<td style="text-align: left;">Eder</td>
<td style="text-align: left;">1.86</td>
<td style="text-align: left;">186</td>
</tr>
</tbody>
</table>
<p>Además, podemos hacer cálculos sobre cálculos de otras columnas previas, utilizando asignaciones. Para ello, asignamos el resultado de una expresión a una variable a la que anteponemos el símbolo <code>@</code>. De esta forma, podemos usar dicha variable a lo largo de nuestra consulta:</p>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="k">SELECT</span><span class="w"> </span><span class="o">@</span><span class="n">max_peso</span><span class="w"> </span><span class="p">:</span><span class="o">=</span><span class="w"> </span><span class="k">MAX</span><span class="p">(</span><span class="n">peso</span><span class="p">)</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">Jugador</span><span class="p">;</span>
</span><span id="__span-6-2"><a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a><span class="k">SELECT</span><span class="w"> </span><span class="n">nombre</span><span class="p">,</span><span class="w"> </span><span class="n">peso</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">Jugador</span><span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="n">peso</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">@</span><span class="n">max_peso</span><span class="p">;</span>
</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align: left;">nombre</th>
<th style="text-align: left;">peso</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">Thibaut</td>
<td style="text-align: left;">96</td>
</tr>
</tbody>
</table>
<div class="admonition info">
<p class="admonition-title">El operador CASE</p>
<p>El operador <a href="https://mariadb.com/kb/en/case-operator/">CASE</a> permite agregar a la proyección la estructura lógica condicional de <code>if/else</code>. Su sintaxis es la siguiente:</p>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="k">CASE</span><span class="w"> </span><span class="n">campo</span><span class="w"> </span>
</span><span id="__span-7-2"><a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a><span class="w">    </span><span class="k">WHEN</span><span class="w"> </span><span class="p">[</span><span class="n">valor1</span><span class="p">]</span><span class="w"> </span><span class="k">THEN</span><span class="w"> </span><span class="n">resultado</span><span class="w"> </span>
</span><span id="__span-7-3"><a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a><span class="w">    </span><span class="p">[</span><span class="k">WHEN</span><span class="w"> </span><span class="p">[</span><span class="n">valor2</span><span class="p">]</span><span class="w"> </span><span class="k">THEN</span><span class="w"> </span><span class="n">resultado</span><span class="w"> </span><span class="p">...]</span><span class="w"> </span>
</span><span id="__span-7-4"><a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a><span class="w">    </span><span class="p">[</span><span class="k">ELSE</span><span class="w"> </span><span class="n">resultado</span><span class="p">]</span><span class="w"> </span>
</span><span id="__span-7-5"><a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a><span class="k">END</span><span class="w"> </span>
</span><span id="__span-7-6"><a id="__codelineno-7-6" name="__codelineno-7-6" href="#__codelineno-7-6"></a>
</span><span id="__span-7-7"><a id="__codelineno-7-7" name="__codelineno-7-7" href="#__codelineno-7-7"></a><span class="k">CASE</span><span class="w"> </span>
</span><span id="__span-7-8"><a id="__codelineno-7-8" name="__codelineno-7-8" href="#__codelineno-7-8"></a><span class="w">    </span><span class="k">WHEN</span><span class="w"> </span><span class="p">[</span><span class="n">condición</span><span class="p">]</span><span class="w"> </span><span class="k">THEN</span><span class="w"> </span><span class="n">resultado</span><span class="w"> </span>
</span><span id="__span-7-9"><a id="__codelineno-7-9" name="__codelineno-7-9" href="#__codelineno-7-9"></a><span class="w">    </span><span class="p">[</span><span class="k">WHEN</span><span class="w"> </span><span class="p">[</span><span class="n">condición</span><span class="p">]</span><span class="w"> </span><span class="k">THEN</span><span class="w"> </span><span class="n">resultado</span><span class="w"> </span><span class="p">...]</span><span class="w"> </span>
</span><span id="__span-7-10"><a id="__codelineno-7-10" name="__codelineno-7-10" href="#__codelineno-7-10"></a><span class="w">    </span><span class="p">[</span><span class="k">ELSE</span><span class="w"> </span><span class="n">resultado</span><span class="p">]</span><span class="w"> </span>
</span><span id="__span-7-11"><a id="__codelineno-7-11" name="__codelineno-7-11" href="#__codelineno-7-11"></a><span class="k">END</span>
</span></code></pre></div>
<p>Por ejemplo, a la hora de mostrar los jugadores, si queremos que cuando el mentor no esté asignado muestre <code>Sin Mentor</code> haríamos:</p>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="k">SELECT</span><span class="w"> </span><span class="n">nombre</span><span class="p">,</span><span class="w"> </span><span class="k">CASE</span><span class="w"> </span><span class="k">WHEN</span><span class="w"> </span><span class="n">mentorID</span><span class="w"> </span><span class="k">IS</span><span class="w"> </span><span class="k">NULL</span><span class="w"> </span><span class="k">THEN</span><span class="w"> </span><span class="s1">'Sin Mentor'</span><span class="w"> </span><span class="k">ELSE</span><span class="w"> </span><span class="n">mentorID</span><span class="w"> </span><span class="k">END</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">Mentor_Status</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">Jugador</span><span class="w"> </span><span class="k">LIMIT</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span>
</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align: left;">nombre</th>
<th style="text-align: left;">Mentor_Status</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">Thibaut</td>
<td style="text-align: left;">Sin Mentor</td>
</tr>
<tr>
<td style="text-align: left;">Daniel</td>
<td style="text-align: left;">Sin Mentor</td>
</tr>
<tr>
<td style="text-align: left;">Eder</td>
<td style="text-align: left;">Sin Mentor</td>
</tr>
</tbody>
</table>
<p>Veamos otro ejemplo. En el caso de las temporadas, la columna <code>esActiva</code> indica si la temporada está en curso. Si quisiéramos mostrar la frase <code>En Curso</code> o <code>Finalizada</code> para estos casos haríamos:</p>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="k">SELECT</span><span class="w"> </span><span class="n">nombre</span><span class="p">,</span><span class="w"> </span><span class="k">CASE</span><span class="w"> </span><span class="k">WHEN</span><span class="w"> </span><span class="n">esActiva</span><span class="w"> </span><span class="k">THEN</span><span class="w"> </span><span class="s1">'En Curso'</span><span class="w"> </span><span class="k">ELSE</span><span class="w"> </span><span class="s1">'Finalizada'</span><span class="w"> </span><span class="k">END</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">Estado_Temporada</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">Temporada</span><span class="p">;</span>
</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align: left;">nombre</th>
<th style="text-align: left;">Estado_Temporada</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">2022-2023</td>
<td style="text-align: left;">Finalizada</td>
</tr>
<tr>
<td style="text-align: left;">2023-2024</td>
<td style="text-align: left;">Finalizada</td>
</tr>
<tr>
<td style="text-align: left;">2024-2025</td>
<td style="text-align: left;">En Curso</td>
</tr>
</tbody>
</table>
</div>
<h3 id="funciones">Funciones<a class="headerlink" href="#funciones" title="Permanent link">¶</a></h3>
<p>A la hora de recuperar o filtrar datos, es muy común utilizar <a href="https://mariadb.com/kb/en/built-in-functions/">funciones</a> que facilitan el trabajo con cadenas, cálculos numéricos, etc.. Como ya has estudiado en el módulo profesional de <em>Programación</em>, las funciones reciben uno o más datos de entrada, también conocidos como parámetros (aunque existen algunas funciones que no reciben ninguno), y devuelven un resultado en base a los datos de entrada.</p>
<p>Cabe destacar que las funciones no están completamente estandarizadas entre los diferentes SGBD, así pues, conviene revisar la sintaxis exacta en el caso de migrar de un sistema a otro.</p>
<h4 id="funciones-agregadas">Funciones agregadas<a class="headerlink" href="#funciones-agregadas" title="Permanent link">¶</a></h4>
<p>Se emplean para realizar cálculos sobre el total de elementos de la consulta (o agrupación). Tras el <code>SELECT</code> indicaremos la función (o funciones) a realizar sobre el total de elementos devueltos por la consulta.</p>
<p>Vamos a comenzar contando la cantidad de filas mediante la función <a href="https://mariadb.com/kb/en/count/"><code>COUNT(expr)</code></a> pasándole como expresión <code>*</code>, lo cual indica que utilice todas las columnas, independientemente de su valor:</p>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="k">SELECT</span><span class="w"> </span><span class="k">COUNT</span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">Jugador</span><span class="p">;</span>
</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align: left;">COUNT(*)</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">150</td>
</tr>
</tbody>
</table>
<p>Si queremos recuperar cuantos elementos diferentes tenemos de un campo, en la expresión usaremos <code>DISTINCT</code>:</p>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-11-1"><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="k">SELECT</span><span class="w"> </span><span class="k">COUNT</span><span class="p">(</span><span class="k">DISTINCT</span><span class="w"> </span><span class="n">posicion</span><span class="p">)</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">Jugador</span><span class="p">;</span>
</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align: left;">COUNT(DISTINCT posicion)</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">4</td>
</tr>
</tbody>
</table>
<p>Otras funciones de agregación que podemos emplear son:</p>
<ul>
<li><a href="https://mariadb.com/kb/en/sum/"><code>SUM(expr)</code></a>: Suma todos los valores de una expresión/columna</li>
<li><a href="https://mariadb.com/kb/en/min/"><code>MIN(expr)</code></a> / <a href="https://mariadb.com/kb/en/max/"><code>MAX(expr)</code></a>: Mínimo o máximo de una expresión/columna</li>
<li><a href="https://mariadb.com/kb/en/avg/"><code>AVG(expr)</code></a>: Valor medio de una expresión/columna</li>
</ul>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-12-1"><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a><span class="k">SELECT</span><span class="w"> </span><span class="k">SUM</span><span class="p">(</span><span class="n">peso</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">Total</span><span class="p">,</span><span class="w"> </span><span class="k">MIN</span><span class="p">(</span><span class="n">peso</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">Minimo</span><span class="p">,</span><span class="w"> </span><span class="k">MAX</span><span class="p">(</span><span class="n">peso</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">Maximo</span><span class="p">,</span><span class="w"> </span><span class="k">AVG</span><span class="p">(</span><span class="n">peso</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">Media</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">Jugador</span><span class="p">;</span>
</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align: left;">Total</th>
<th style="text-align: left;">Minimo</th>
<th style="text-align: left;">Maximo</th>
<th style="text-align: left;">Media</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">11250</td>
<td style="text-align: left;">60</td>
<td style="text-align: left;">96</td>
<td style="text-align: left;">75</td>
</tr>
</tbody>
</table>
<p>En la próxima unidad estudiaremos como podemos <a href="https://aitor-medrano.github.io/bd/07sql-group.html#agregaciones">agregar datos</a> por algunas columnas y realizar cálculos sobre ellas, lo que nos permitirá obtener información del tipo <em>"Altura media de los equipos"</em>, <em>"Peso medio por posición"</em>, etc...</p>
<h4 id="cadenas">Cadenas<a class="headerlink" href="#cadenas" title="Permanent link">¶</a></h4>
<p>Mediante <a href="https://mariadb.com/kb/en/string-functions/">funciones de cadenas de texto</a> podemos realizar múltiples operaciones:</p>
<ul>
<li><a href="https://mariadb.com/kb/en/concat/"><code>CONCAT(cadena1, cadena2, …)</code></a>: permite unir/concatenar cadenas</li>
<li><a href="https://mariadb.com/kb/en/lower/"><code>LOWER(cadena)</code> / <code>LCASE(cadena)</code></a>: transforma <code>cadena</code> a minúsculas</li>
<li><a href="https://mariadb.com/kb/en/upper/"><code>UPPER(cadena)</code> / <code>UCASE(cadena)</code></a>: transforma <code>cadena</code> en MAYÚSCULAS</li>
<li><a href="https://mariadb.com/kb/en/left/"><code>LEFT(cadena, longitud)</code></a> / <a href="https://mariadb.com/kb/en/right/"><code>RIGHT</code></a>: devuelve los <code>longitud</code> caracteres de más a la izquierda/derecha de la <code>cadena</code></li>
<li><a href="https://mariadb.com/kb/en/trim/"><code>TRIM(cadena)</code></a> / <a href="https://mariadb.com/kb/en/ltrim/"><code>LTRIM</code></a> / <a href="https://mariadb.com/kb/en/rtrim/"><code>RTRIM</code></a>: elimina los espacios en blanco por delante y por detrás, o solamente los de delante/izquierda (<em>L</em>) o los de detrás/derecha (<em>R</em>)</li>
</ul>
<p>Algunos ejemplos de su uso:</p>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-13-1"><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a><span class="k">SELECT</span><span class="w"> </span><span class="n">CONCAT</span><span class="p">(</span><span class="n">nombre</span><span class="p">,</span><span class="w"> </span><span class="s1">' '</span><span class="p">,</span><span class="w"> </span><span class="n">apellido</span><span class="p">)</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">Jugador</span><span class="p">,</span><span class="w"> </span><span class="k">UPPER</span><span class="p">(</span><span class="n">nombre</span><span class="p">),</span><span class="w"> </span><span class="k">LENGTH</span><span class="p">(</span><span class="n">apellido</span><span class="p">)</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">Jugador</span><span class="w"> </span><span class="k">LIMIT</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span>
</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align: left;">Jugador</th>
<th style="text-align: left;">UPPER(nombre)</th>
<th style="text-align: left;">LENGTH(apellido)</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">Thibaut Courtois</td>
<td style="text-align: left;">THIBAUT</td>
<td style="text-align: left;">8</td>
</tr>
<tr>
<td style="text-align: left;">Daniel Carvajal</td>
<td style="text-align: left;">DANIEL</td>
<td style="text-align: left;">8</td>
</tr>
<tr>
<td style="text-align: left;">Eder Militao</td>
<td style="text-align: left;">EDER</td>
<td style="text-align: left;">7</td>
</tr>
</tbody>
</table>
<p>Otras funciones que podemos utilizar son <code>CHAR_LENGTH(cadena)</code> para obtener el tamaño, <a href="https://mariadb.com/kb/en/locate/"><code>LOCATE(subcadena, cadena)</code></a> para encontrar una subcadena en una cadena, REPLACE(cadena, cadenaOrigen, cadenaDestino)<code>para sustituir una subcadena por otra o</code>REVERSE(cadena)` para invertir una cadena.</p>
<h4 id="fecha-hora">Fecha / Hora<a class="headerlink" href="#fecha-hora" title="Permanent link">¶</a></h4>
<p>Si trabajamos con campos de tipo fecha, podemos emplear las siguientes <a href="https://mariadb.com/kb/en/date-time-functions/">funciones</a>:</p>
<ul>
<li><a href="https://mariadb.com/kb/en/now/"><code>NOW()</code> / <code>CURRENT_TIMESTAMP</code></a>: fecha y hora actual del sistema.</li>
<li><a href="https://mariadb.com/kb/en/curdate/"><code>CURDATE()</code></a>: fecha actual en formato <code>yyyy-mm-dd</code> o <code>yyyymmdd</code>.</li>
<li><a href="https://mariadb.com/kb/en/datediff/"><code>DATEDIFF(fecha1, fecha2)</code></a>: diferencia de días entre dos fechas.</li>
<li><a href="https://mariadb.com/kb/en/timestampdiff/"><code>TIMESTAMPDIFF(unidad, fecha1, fecha2)</code></a>: diferencia medida en <code>unidad</code> entre dos fechas.</li>
<li><a href="https://mariadb.com/kb/en/date_add/"><code>DATE_ADD(fecha, INTERVAL expresión Tipo)</code></a> / <a href="https://mariadb.com/kb/en/date_sub/"><code>DATE_SUB</code></a>, pudiendo utilizar los siguientes <a href="https://mariadb.com/kb/en/date-and-time-units/">tipos</a>.</li>
</ul>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-14-1"><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a><span class="k">SELECT</span><span class="w"> </span><span class="n">NOW</span><span class="p">(),</span><span class="w"> </span><span class="n">CURDATE</span><span class="p">(),</span><span class="w"> </span><span class="n">DATEDIFF</span><span class="p">(</span><span class="n">fechaFin</span><span class="p">,</span><span class="w"> </span><span class="n">fechaInicio</span><span class="p">)</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">Dias_Temporada</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">Temporada</span><span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="n">esActiva</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">TRUE</span><span class="p">;</span>
</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align: left;">NOW()</th>
<th style="text-align: left;">CURDATE()</th>
<th style="text-align: left;">Dias_Temporada</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">2026-01-04 12:00:00</td>
<td style="text-align: left;">2026-01-04</td>
<td style="text-align: left;">319</td>
</tr>
</tbody>
</table>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-15-1"><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a><span class="k">SELECT</span><span class="w"> </span><span class="n">nombre</span><span class="p">,</span><span class="w"> </span><span class="n">fechaNacimiento</span><span class="p">,</span><span class="w"> </span><span class="n">TIMESTAMPDIFF</span><span class="p">(</span><span class="k">YEAR</span><span class="p">,</span><span class="w"> </span><span class="n">fechaNacimiento</span><span class="p">,</span><span class="w"> </span><span class="n">CURDATE</span><span class="p">())</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">Edad</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">Jugador</span><span class="w"> </span><span class="k">LIMIT</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span>
</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align: left;">nombre</th>
<th style="text-align: left;">fechaNacimiento</th>
<th style="text-align: left;">Edad</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">Thibaut</td>
<td style="text-align: left;">1992-05-11</td>
<td style="text-align: left;">33</td>
</tr>
<tr>
<td style="text-align: left;">Daniel</td>
<td style="text-align: left;">1992-01-11</td>
<td style="text-align: left;">33</td>
</tr>
<tr>
<td style="text-align: left;">Eder</td>
<td style="text-align: left;">1998-01-18</td>
<td style="text-align: left;">27</td>
</tr>
</tbody>
</table>
<p>Por otro lado, además de operaciones sobre campos fecha, también podemos realizar transformaciones sobre fecha para obtener una parte o información relativa a la misma:</p>
<ul>
<li><a href="https://mariadb.com/kb/en/year/"><code>YEAR(fecha)</code></a>: año en formato <code>aaaa</code></li>
<li><a href="https://mariadb.com/kb/en/month/"><code>MONTH(fecha)</code></a>: mes en formato <code>mm</code></li>
<li>Otras funciones útiles son <code>SECOND</code>, <code>MINUTE</code>, <code>HOUR</code>, <code>DAY</code>, <code>WEEK</code>, <code>DAYOFWEEK</code> …</li>
</ul>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-16-1"><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a><span class="k">SELECT</span><span class="w"> </span><span class="n">fechaNacimiento</span><span class="p">,</span><span class="w"> </span><span class="k">YEAR</span><span class="p">(</span><span class="n">fechaNacimiento</span><span class="p">),</span><span class="w"> </span><span class="k">MONTH</span><span class="p">(</span><span class="n">fechaNacimiento</span><span class="p">)</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">Jugador</span><span class="w"> </span><span class="k">LIMIT</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span>
</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align: left;">fechaNacimiento</th>
<th style="text-align: left;">YEAR(fechaNacimiento)</th>
<th style="text-align: left;">MONTH(fechaNacimiento)</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">1992-05-11</td>
<td style="text-align: left;">1992</td>
<td style="text-align: left;">5</td>
</tr>
<tr>
<td style="text-align: left;">1992-01-11</td>
<td style="text-align: left;">1992</td>
<td style="text-align: left;">1</td>
</tr>
<tr>
<td style="text-align: left;">1998-01-18</td>
<td style="text-align: left;">1998</td>
<td style="text-align: left;">1</td>
</tr>
</tbody>
</table>
<p>Por último, para formatear un campo de tipo fecha y mostrarla conforme necesitemos, podemos hacer uso de <a href="https://mariadb.com/kb/en/date_format/"><code>DATE_FORMAT(fecha, formato)</code></a> para obtener información similar a la anterior (le podemos pasar un tercer parámetro con el <em>locale</em> para configurar el idioma de salida y sobrescribir el del sistema):</p>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-17-1"><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a><span class="k">SELECT</span><span class="w"> </span><span class="n">fechaNacimiento</span><span class="p">,</span><span class="w"> </span><span class="n">DATE_FORMAT</span><span class="p">(</span><span class="n">fechaNacimiento</span><span class="p">,</span><span class="w"> </span><span class="s1">'%d-%m-%Y'</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">FechaES</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">Jugador</span><span class="w"> </span><span class="k">LIMIT</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span>
</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align: left;">fechaNacimiento</th>
<th style="text-align: left;">FechaES</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">1992-05-11</td>
<td style="text-align: left;">11-05-1992</td>
</tr>
<tr>
<td style="text-align: left;">1992-01-11</td>
<td style="text-align: left;">11-01-1992</td>
</tr>
<tr>
<td style="text-align: left;">1998-01-18</td>
<td style="text-align: left;">18-01-1998</td>
</tr>
</tbody>
</table>
<p>Finalmente, otra función muy importante a la hora de trabajar con fechas es la función <a href="https://mariadb.com/kb/en/cast/"><code>CAST(expr as tipo)</code></a> que realiza la conversión de tipos de datos.</p>
<p>De esta manera podemos convertir una expresión de cadena en un tipo fecha:</p>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-18-1"><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a><span class="k">SELECT</span><span class="w"> </span><span class="k">CAST</span><span class="p">(</span><span class="ss">"2024-12-9"</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="nb">DATE</span><span class="p">);</span>
</span></code></pre></div>
<h4 id="condicionales-y-nulos">Condicionales y Nulos<a class="headerlink" href="#condicionales-y-nulos" title="Permanent link">¶</a></h4>
<p>De forma similar al operador <a href="https://aitor-medrano.github.io/bd/06sql.html#CASE"><code>CASE</code></a>, si preferimos, podemos hacer uso de la función <a href="https://mariadb.com/kb/en/if-function/"><code>IF(expr,V,F)</code></a>.</p>
<p>Por ejemplo, podemos reescribir la misma consulta vista anteriormente:</p>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-19-1"><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a><span class="k">SELECT</span><span class="w"> </span><span class="n">nombre</span><span class="p">,</span><span class="w"> </span><span class="k">CASE</span><span class="w"> </span><span class="k">WHEN</span><span class="w"> </span><span class="n">mentorID</span><span class="w"> </span><span class="k">IS</span><span class="w"> </span><span class="k">NULL</span><span class="w"> </span><span class="k">THEN</span><span class="w"> </span><span class="ss">"Sin Mentor"</span><span class="w"> </span><span class="k">ELSE</span><span class="w"> </span><span class="n">mentorID</span><span class="w"> </span><span class="k">END</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">Mentor_Status</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">Jugador</span><span class="p">;</span>
</span></code></pre></div>
<p>por otra que utilice la función <code>IF</code> mejorando la legibilidad:</p>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-20-1"><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a><span class="k">SELECT</span><span class="w"> </span><span class="n">nombre</span><span class="p">,</span><span class="w"> </span><span class="k">IF</span><span class="p">(</span><span class="n">mentorID</span><span class="w"> </span><span class="k">IS</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w"> </span><span class="s1">'Sin Mentor'</span><span class="p">,</span><span class="w"> </span><span class="n">mentorID</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">Mentor_Status</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">Jugador</span><span class="w"> </span><span class="k">LIMIT</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span>
</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align: left;">nombre</th>
<th style="text-align: left;">Estatura</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">Thibaut</td>
<td style="text-align: left;">Alto</td>
</tr>
<tr>
<td style="text-align: left;">Daniel</td>
<td style="text-align: left;">Normal</td>
</tr>
<tr>
<td style="text-align: left;">Eder</td>
<td style="text-align: left;">Alto</td>
</tr>
</tbody>
</table>
<p>Cuando trabajamos con nulos también podemos emplear las funciones:</p>
<ul>
<li><a href="https://mariadb.com/kb/en/ifnull/"><code>IFNULL(campo, valor)</code></a>: devuelve <code>valor</code> si <code>campo</code> es nulo</li>
<li><a href="https://mariadb.com/kb/en/coalesce/"><code>COALESCE(campo1, campo2, ...)</code></a>: devuelve el primer valor no nulo de la lista de parámetros.</li>
</ul>
<p>Dicho esto, las siguientes consultas obtienen el mismo resultado:</p>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-21-1"><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a><span class="k">SELECT</span><span class="w"> </span><span class="n">nombre</span><span class="p">,</span><span class="w"> </span><span class="n">IFNULL</span><span class="p">(</span><span class="n">mentorID</span><span class="p">,</span><span class="w"> </span><span class="s1">'Sin Mentor'</span><span class="p">)</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">Jugador</span><span class="w"> </span><span class="k">LIMIT</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span>
</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align: left;">nombre</th>
<th style="text-align: left;">IFNULL(mentorID, 'Sin Mentor')</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">Thibaut</td>
<td style="text-align: left;">Sin Mentor</td>
</tr>
<tr>
<td style="text-align: left;">Daniel</td>
<td style="text-align: left;">Sin Mentor</td>
</tr>
<tr>
<td style="text-align: left;">Eder</td>
<td style="text-align: left;">Sin Mentor</td>
</tr>
</tbody>
</table>
<h4 id="otras">Otras<a class="headerlink" href="#otras" title="Permanent link">¶</a></h4>
<p>También tenemos funciones <a href="https://mariadb.com/kb/en/numeric-functions/">matemáticas</a> como:</p>
<ul>
<li><a href="https://mariadb.com/kb/en/abs/"><code>ABS(num)</code></a>: obtiene el valor absoluto de <code>num</code></li>
<li><a href="https://mariadb.com/kb/en/sqrt/"><code>SQRT(num)</code></a>, <a href="https://mariadb.com/kb/en/pow/"><code>POW(base, exponente)</code></a>: raíz cuadrada de <code>num</code>, potencia de <code>base</code> elevado a <code>exponente</code></li>
<li><a href="https://mariadb.com/kb/en/rand/"><code>RAND()</code></a>: obtiene un número aleatorio</li>
<li><a href="https://mariadb.com/kb/en/round/"><code>ROUND(num)</code></a> / <a href="https://mariadb.com/kb/en/floor/"><code>FLOOR(num)</code></a> / <a href="https://mariadb.com/kb/en/ceiling/"><code>CEILING(num)</code></a>: redondea un número, por exceso o por defecto</li>
<li><a href="https://mariadb.com/kb/en/abs/"><code>TRUNCATE(num,d)</code></a>: trunca <code>num</code> con <code>d</code> decimales</li>
</ul>
<p>Veamos unos ejemplos de redondeo de cantidades:</p>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-22-1"><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a><span class="k">SELECT</span><span class="w"> </span><span class="n">altura</span><span class="p">,</span><span class="w"> </span><span class="n">ROUND</span><span class="p">(</span><span class="n">altura</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">),</span><span class="w"> </span><span class="k">TRUNCATE</span><span class="p">(</span><span class="n">altura</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">Jugador</span><span class="w"> </span><span class="k">LIMIT</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span>
</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align: left;">altura</th>
<th style="text-align: left;">ROUND(altura, 1)</th>
<th style="text-align: left;">TRUNCATE(altura, 0)</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">2</td>
<td style="text-align: left;">2.0</td>
<td style="text-align: left;">2</td>
</tr>
<tr>
<td style="text-align: left;">1.73</td>
<td style="text-align: left;">1.7</td>
<td style="text-align: left;">1</td>
</tr>
<tr>
<td style="text-align: left;">1.86</td>
<td style="text-align: left;">1.9</td>
<td style="text-align: left;">1</td>
</tr>
</tbody>
</table>
<p>Otra función muy empleada es <a href="https://mariadb.com/kb/en/format/"><code>FORMAT(numero, decimales)</code></a> para formatear los números con separadores de miles y cantidad de decimales:</p>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-23-1"><a id="__codelineno-23-1" name="__codelineno-23-1" href="#__codelineno-23-1"></a><span class="k">SELECT</span><span class="w"> </span><span class="n">nombre</span><span class="p">,</span><span class="w"> </span><span class="n">FORMAT</span><span class="p">(</span><span class="n">presupuesto</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">Equipo</span><span class="w"> </span><span class="k">LIMIT</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span>
</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align: left;">nombre</th>
<th style="text-align: left;">FORMAT(presupuesto, 2)</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">Real Madrid CF</td>
<td style="text-align: left;">750,000,000.00</td>
</tr>
<tr>
<td style="text-align: left;">FC Barcelona</td>
<td style="text-align: left;">600,000,000.00</td>
</tr>
<tr>
<td style="text-align: left;">Atletico de Madrid</td>
<td style="text-align: left;">300,000,000.00</td>
</tr>
</tbody>
</table>
<p>También podemos emplear funciones para <a href="https://mariadb.com/kb/en/encryption-hashing-and-compression-functions/">encriptar o comprimir</a>, así como para trabajar con <a href="https://mariadb.com/kb/en/geographic-functions/">coordenadas geográficas</a>.</p>
<div class="admonition info">
<p class="admonition-title">Resumen de funciones</p>
<table>
<thead>
<tr>
<th style="text-align: left;">Función</th>
<th style="text-align: left;">Descripción</th>
<th style="text-align: left;">Ejemplo</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;"><code>COUNT(*)</code> / <code>COUNT(expr)</code></td>
<td style="text-align: left;">Cuenta filas totales o no nulas de una expresión</td>
<td style="text-align: left;"><code>COUNT(*)</code></td>
</tr>
<tr>
<td style="text-align: left;"><code>SUM(col)</code></td>
<td style="text-align: left;">Suma los valores de una columna numérica</td>
<td style="text-align: left;"><code>SUM(peso)</code></td>
</tr>
<tr>
<td style="text-align: left;"><code>AVG(col)</code></td>
<td style="text-align: left;">Calcula el promedio</td>
<td style="text-align: left;"><code>AVG(altura)</code></td>
</tr>
<tr>
<td style="text-align: left;"><code>MAX(col)</code> / <code>MIN(col)</code></td>
<td style="text-align: left;">Obtiene el valor máximo o mínimo</td>
<td style="text-align: left;"><code>MAX(presupuesto)</code></td>
</tr>
<tr>
<td style="text-align: left;"><code>CONCAT(s1, s2)</code></td>
<td style="text-align: left;">Une cadenas de texto</td>
<td style="text-align: left;"><code>CONCAT(nombre, ' ', apellido)</code></td>
</tr>
<tr>
<td style="text-align: left;"><code>UPPER(s)</code> / <code>LOWER(s)</code></td>
<td style="text-align: left;">Convierte a mayúsculas o minúsculas</td>
<td style="text-align: left;"><code>UPPER(nombre)</code></td>
</tr>
<tr>
<td style="text-align: left;"><code>LENGTH(s)</code> / <code>CHAR_LENGTH(s)</code></td>
<td style="text-align: left;">Obtiene la longitud de la cadena</td>
<td style="text-align: left;"><code>LENGTH(nombre)</code></td>
</tr>
<tr>
<td style="text-align: left;"><code>NOW()</code> / <code>CURDATE()</code></td>
<td style="text-align: left;">Obtiene fecha/hora actual o solo fecha</td>
<td style="text-align: left;"><code>NOW()</code></td>
</tr>
<tr>
<td style="text-align: left;"><code>TIMESTAMPDIFF(unit, d1, d2)</code></td>
<td style="text-align: left;">Diferencia entre fechas en la unidad dada</td>
<td style="text-align: left;"><code>TIMESTAMPDIFF(YEAR, nac, CURDATE())</code></td>
</tr>
<tr>
<td style="text-align: left;"><code>IFNULL(val, default)</code></td>
<td style="text-align: left;">Si es nulo devuelve default, si no el valor</td>
<td style="text-align: left;"><code>IFNULL(mentorID, 'Sin Mentor')</code></td>
</tr>
<tr>
<td style="text-align: left;"><code>COALESCE(val1, val2...)</code></td>
<td style="text-align: left;">Devuelve el primer valor no nulo</td>
<td style="text-align: left;"><code>COALESCE(tel, movil, 'Sin contacto')</code></td>
</tr>
<tr>
<td style="text-align: left;"><code>ROUND(num, dec)</code></td>
<td style="text-align: left;">Redondea un número a <code>dec</code> decimales</td>
<td style="text-align: left;"><code>ROUND(altura, 2)</code></td>
</tr>
</tbody>
</table>
</div>
<h3 id="ordenando-y-limitando">Ordenando y Limitando<a class="headerlink" href="#ordenando-y-limitando" title="Permanent link">¶</a></h3>
<p>Es muy común tener que ordenar el resultado de una consulta para darle más importancia a unos campos que otros, e incluso, reducir el número de tuplas recuperadas.</p>
<p>Así pues, para ordenar mediante la cláusula <a href="https://mariadb.com/kb/en/order-by/"><code>ORDER BY {campo | pos} [ASC|DESC]</code></a>, indicando los diferentes campos separados por coma.</p>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-24-1"><a id="__codelineno-24-1" name="__codelineno-24-1" href="#__codelineno-24-1"></a><span class="k">SELECT</span><span class="w"> </span><span class="n">nombre</span><span class="p">,</span><span class="w"> </span><span class="n">añoFundacion</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">Equipo</span><span class="w"> </span><span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">añoFundacion</span><span class="w"> </span><span class="k">ASC</span><span class="w"> </span><span class="k">LIMIT</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span>
</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align: left;">nombre</th>
<th style="text-align: left;">añoFundacion</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">Sevilla FC</td>
<td style="text-align: left;">1890</td>
</tr>
<tr>
<td style="text-align: left;">Athletic Club</td>
<td style="text-align: left;">1898</td>
</tr>
<tr>
<td style="text-align: left;">FC Barcelona</td>
<td style="text-align: left;">1899</td>
</tr>
</tbody>
</table>
<p>Por defecto, la ordenación se realiza de forma ascendente. Por lo tanto, la consulta anterior y la siguiente son similares:</p>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-25-1"><a id="__codelineno-25-1" name="__codelineno-25-1" href="#__codelineno-25-1"></a><span class="k">SELECT</span><span class="w"> </span><span class="n">nombre</span><span class="p">,</span><span class="w"> </span><span class="n">añoFundacion</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">Equipo</span><span class="w"> </span><span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">añoFundacion</span><span class="w"> </span><span class="k">DESC</span><span class="w"> </span><span class="k">LIMIT</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span>
</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align: left;">nombre</th>
<th style="text-align: left;">añoFundacion</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">Girona FC</td>
<td style="text-align: left;">1930</td>
</tr>
<tr>
<td style="text-align: left;">Villarreal CF</td>
<td style="text-align: left;">1923</td>
</tr>
<tr>
<td style="text-align: left;">Valencia CF</td>
<td style="text-align: left;">1919</td>
</tr>
</tbody>
</table>
<p>Algunos desarrolladores prefieren explicitar el orden de <code>ORDER BY</code> para evitar ambigüedades. Otros, en cambio, prefieren obviar la opción <code>ASC</code> para reducir el tamaño de las consultas.</p>
<p>Por otro lado, tal como hemos comentado previamente, podemos ordenar por más de una columna, indicando para cada una de ellas diferentes tipos de ordenaciones:</p>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-26-1"><a id="__codelineno-26-1" name="__codelineno-26-1" href="#__codelineno-26-1"></a><span class="k">SELECT</span><span class="w"> </span><span class="n">equipoID</span><span class="p">,</span><span class="w"> </span><span class="n">dorsal</span><span class="p">,</span><span class="w"> </span><span class="n">nombre</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">Jugador</span><span class="w"> </span><span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">equipoID</span><span class="w"> </span><span class="k">ASC</span><span class="p">,</span><span class="w"> </span><span class="n">dorsal</span><span class="w"> </span><span class="k">ASC</span><span class="w"> </span><span class="k">LIMIT</span><span class="w"> </span><span class="mi">5</span><span class="p">;</span>
</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align: left;">equipoID</th>
<th style="text-align: left;">dorsal</th>
<th style="text-align: left;">nombre</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">1</td>
<td style="text-align: left;">1</td>
<td style="text-align: left;">Thibaut</td>
</tr>
<tr>
<td style="text-align: left;">1</td>
<td style="text-align: left;">2</td>
<td style="text-align: left;">Daniel</td>
</tr>
<tr>
<td style="text-align: left;">1</td>
<td style="text-align: left;">3</td>
<td style="text-align: left;">Eder</td>
</tr>
<tr>
<td style="text-align: left;">1</td>
<td style="text-align: left;">4</td>
<td style="text-align: left;">David</td>
</tr>
<tr>
<td style="text-align: left;">1</td>
<td style="text-align: left;">5</td>
<td style="text-align: left;">Jude</td>
</tr>
</tbody>
</table>
<p>Rendimiento</p>
<p>Hay que tener en cuenta que ordenar los resultados de una consulta requiere colocar todos los datos en memoria, y dependiendo de la cantidad, puede ser una operación computacionalmente compleja.</p>
<p>Finalmente, a la hora de indicar el nombre de las columnas de ordenación, también podemos un número indicando la posición de la columna (en el siguiente ejemplo, 1 referencia a <code>NomEmp</code> y 2 a <code>NifEmp</code>):</p>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-27-1"><a id="__codelineno-27-1" name="__codelineno-27-1" href="#__codelineno-27-1"></a><span class="k">SELECT</span><span class="w"> </span><span class="n">nombre</span><span class="p">,</span><span class="w"> </span><span class="n">añoFundacion</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">Equipo</span><span class="w"> </span><span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="k">ASC</span><span class="w"> </span><span class="k">LIMIT</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span>
</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align: left;">nombre</th>
<th style="text-align: left;">añoFundacion</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">Sevilla FC</td>
<td style="text-align: left;">1890</td>
</tr>
<tr>
<td style="text-align: left;">Athletic Club</td>
<td style="text-align: left;">1898</td>
</tr>
<tr>
<td style="text-align: left;">FC Barcelona</td>
<td style="text-align: left;">1899</td>
</tr>
</tbody>
</table>
<p>Además, si queremos restringir y limitar el número de resultados de la consulta usaremos <a href="https://mariadb.com/kb/en/limit/"><code>LIMIT cantidad</code></a>:</p>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-28-1"><a id="__codelineno-28-1" name="__codelineno-28-1" href="#__codelineno-28-1"></a><span class="k">SELECT</span><span class="w"> </span><span class="n">nombre</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">Jugador</span><span class="w"> </span><span class="k">LIMIT</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span>
</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align: left;">nombre</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">Thibaut</td>
</tr>
<tr>
<td style="text-align: left;">Daniel</td>
</tr>
<tr>
<td style="text-align: left;">Eder</td>
</tr>
</tbody>
</table>
<p>Reduciendo el tráfico</p>
<p>En ocasiones, cuando queremos obtener una muestra de los datos, en vez de hacer una consulta <code>select * from ...</code> para comprobar qué datos almacena una determinada tabla, es mucho mejor acostumbrarse a realizar un <code>select * from ... LIMIT 10</code>. De este modo, no sobrecargamos el servidor ni incrementamos el tráfico de datos.</p>
<p>Si no queremos coger los primeros elementos, podemos hacer uso <a href="https://mariadb.com/kb/en/limit/"><code>LIMIT inicio, cantidad</code></a>, teniendo en cuenta que <code>inicio</code> referencia al desplazamiento, es decir, la cantidad de filas que se ignorarán.</p>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-29-1"><a id="__codelineno-29-1" name="__codelineno-29-1" href="#__codelineno-29-1"></a><span class="k">SELECT</span><span class="w"> </span><span class="n">nombre</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">Jugador</span><span class="w"> </span><span class="k">LIMIT</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="p">;</span>
</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align: left;">nombre</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">Vinicius</td>
</tr>
<tr>
<td style="text-align: left;">Federico</td>
</tr>
<tr>
<td style="text-align: left;">Kylian</td>
</tr>
<tr>
<td style="text-align: left;">Luka</td>
</tr>
<tr>
<td style="text-align: left;">Rodrygo</td>
</tr>
</tbody>
</table>
<p>Por último, podemos expresar lo mismo mediante <a href="https://mariadb.com/kb/en/limit/"><code>LIMIT cantidad OFFSET inicio</code></a>, sólo que cambiamos el orden de los parámetros:</p>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-30-1"><a id="__codelineno-30-1" name="__codelineno-30-1" href="#__codelineno-30-1"></a><span class="k">SELECT</span><span class="w"> </span><span class="n">nombre</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">Jugador</span><span class="w"> </span><span class="k">LIMIT</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="k">OFFSET</span><span class="w"> </span><span class="mi">5</span><span class="p">;</span>
</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align: left;">nombre</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">Vinicius</td>
</tr>
<tr>
<td style="text-align: left;">Federico</td>
</tr>
<tr>
<td style="text-align: left;">Kylian</td>
</tr>
<tr>
<td style="text-align: left;">Luka</td>
</tr>
<tr>
<td style="text-align: left;">Rodrygo</td>
</tr>
</tbody>
</table>
<h3 id="seleccion">Selección<a class="headerlink" href="#seleccion" title="Permanent link">¶</a></h3>
<p>La selección en SQL permite filtrar filas de una tabla en función de condiciones específicas. Esto se logra mediante la cláusula <code>WHERE</code>, que define los criterios de filtrado.</p>
<p>Para filtrar los datos y realizar una selección de tuplas, podemos emplear tanto <a href="https://mariadb.com/kb/en/function-and-operator-reference/">funciones como operadores</a> dentro del <code>WHERE</code>. Para realizar las comparaciones, se expresan mediante <code>expresion1 operador expresion2</code>, pudiendo utilizar los operadores relacionales <code>&lt;</code>, <code>&lt;=</code>, <code>&gt;</code>, <code>&gt;=</code>, <code>=</code>, <code>!=</code>, así como los operadores lógicos como <code>and</code>, <code>or</code>, <code>not</code>, etc...</p>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-31-1"><a id="__codelineno-31-1" name="__codelineno-31-1" href="#__codelineno-31-1"></a><span class="k">SELECT</span><span class="w"> </span><span class="n">nombre</span><span class="p">,</span><span class="w"> </span><span class="n">posicion</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">Jugador</span><span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="n">posicion</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'Portero'</span><span class="w"> </span><span class="k">LIMIT</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span>
</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align: left;">nombre</th>
<th style="text-align: left;">posicion</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">Thibaut</td>
<td style="text-align: left;">Portero</td>
</tr>
<tr>
<td style="text-align: left;">Marc-Andre</td>
<td style="text-align: left;">Portero</td>
</tr>
<tr>
<td style="text-align: left;">Inaki</td>
<td style="text-align: left;">Portero</td>
</tr>
</tbody>
</table>
<p>Como puede observarse, no es necesario que el o los atributos que usemos en la selección luego aparezcan en la proyección, ni viceversa.</p>
<h4 id="rangos">Rangos<a class="headerlink" href="#rangos" title="Permanent link">¶</a></h4>
<p>Supongamos que queremos recuperar los equipos fundados entre el año 1900 y 1920. Podemos hacerlo haciendo uso de una conjunción entre dos comparaciones:</p>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-32-1"><a id="__codelineno-32-1" name="__codelineno-32-1" href="#__codelineno-32-1"></a><span class="k">SELECT</span><span class="w"> </span><span class="n">nombre</span><span class="p">,</span><span class="w"> </span><span class="n">añoFundacion</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">Equipo</span><span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="n">añoFundacion</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="mi">1900</span><span class="w"> </span><span class="k">AND</span><span class="w"> </span><span class="n">añoFundacion</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mi">1920</span><span class="p">;</span>
</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align: left;">nombre</th>
<th style="text-align: left;">añoFundacion</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">Real Madrid CF</td>
<td style="text-align: left;">1902</td>
</tr>
<tr>
<td style="text-align: left;">Atletico de Madrid</td>
<td style="text-align: left;">1903</td>
</tr>
<tr>
<td style="text-align: left;">Real Sociedad</td>
<td style="text-align: left;">1909</td>
</tr>
<tr>
<td style="text-align: left;">Real Betis Balompie</td>
<td style="text-align: left;">1907</td>
</tr>
<tr>
<td style="text-align: left;">Valencia CF</td>
<td style="text-align: left;">1919</td>
</tr>
</tbody>
</table>
<p>Si el conjunto de valores a comparar forma parte de un rango numérico, es mejor utilizar <a href="https://mariadb.com/kb/en/between-and/"><code>BETWEEN .. AND</code></a>, siguiendo la sintaxis <code>expresión1 [NOT] BETWEEN expresión2 AND expresión3</code>:</p>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-33-1"><a id="__codelineno-33-1" name="__codelineno-33-1" href="#__codelineno-33-1"></a><span class="k">SELECT</span><span class="w"> </span><span class="n">nombre</span><span class="p">,</span><span class="w"> </span><span class="n">añoFundacion</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">Equipo</span><span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="n">añoFundacion</span><span class="w"> </span><span class="k">BETWEEN</span><span class="w"> </span><span class="mi">1900</span><span class="w"> </span><span class="k">AND</span><span class="w"> </span><span class="mi">1920</span><span class="p">;</span>
</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align: left;">nombre</th>
<th style="text-align: left;">añoFundacion</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">Real Madrid CF</td>
<td style="text-align: left;">1902</td>
</tr>
<tr>
<td style="text-align: left;">Atletico de Madrid</td>
<td style="text-align: left;">1903</td>
</tr>
<tr>
<td style="text-align: left;">Real Sociedad</td>
<td style="text-align: left;">1909</td>
</tr>
<tr>
<td style="text-align: left;">Real Betis Balompie</td>
<td style="text-align: left;">1907</td>
</tr>
<tr>
<td style="text-align: left;">Valencia CF</td>
<td style="text-align: left;">1919</td>
</tr>
</tbody>
</table>
<p>Así pues, la misma consulta la podemos reescribir así:</p>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-34-1"><a id="__codelineno-34-1" name="__codelineno-34-1" href="#__codelineno-34-1"></a><span class="k">SELECT</span><span class="w"> </span><span class="n">nombre</span><span class="p">,</span><span class="w"> </span><span class="n">añoFundacion</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">Equipo</span><span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="n">añoFundacion</span><span class="w"> </span><span class="k">BETWEEN</span><span class="w"> </span><span class="mi">1900</span><span class="w"> </span><span class="k">AND</span><span class="w"> </span><span class="mi">1920</span><span class="p">;</span>
</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align: left;">nombre</th>
<th style="text-align: left;">añoFundacion</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">Real Madrid CF</td>
<td style="text-align: left;">1902</td>
</tr>
<tr>
<td style="text-align: left;">Atletico de Madrid</td>
<td style="text-align: left;">1903</td>
</tr>
<tr>
<td style="text-align: left;">Real Sociedad</td>
<td style="text-align: left;">1909</td>
</tr>
<tr>
<td style="text-align: left;">Real Betis Balompie</td>
<td style="text-align: left;">1907</td>
</tr>
<tr>
<td style="text-align: left;">Valencia CF</td>
<td style="text-align: left;">1919</td>
</tr>
</tbody>
</table>
<p>También podemos negar la cláusula o usarla con fechas:</p>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-35-1"><a id="__codelineno-35-1" name="__codelineno-35-1" href="#__codelineno-35-1"></a><span class="k">SELECT</span><span class="w"> </span><span class="n">nombre</span><span class="p">,</span><span class="w"> </span><span class="n">fechaNacimiento</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">Jugador</span><span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="n">fechaNacimiento</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">BETWEEN</span><span class="w"> </span><span class="s1">'1990-01-01'</span><span class="w"> </span><span class="k">AND</span><span class="w"> </span><span class="s1">'1999-12-31'</span><span class="w"> </span><span class="k">LIMIT</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span>
</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align: left;">nombre</th>
<th style="text-align: left;">fechaNacimiento</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">Luka</td>
<td style="text-align: left;">1985-09-09</td>
</tr>
<tr>
<td style="text-align: left;">Vinicius</td>
<td style="text-align: left;">2000-07-12</td>
</tr>
<tr>
<td style="text-align: left;">Jude</td>
<td style="text-align: left;">2003-06-29</td>
</tr>
</tbody>
</table>
<h4 id="conjuntos">Conjuntos<a class="headerlink" href="#conjuntos" title="Permanent link">¶</a></h4>
<p>Si en vez de un rango, queremos comprobar si el resultado de la expresión coincide con uno de entre una lista de valores (los cuales deben coincidir en su tipo de datos), usaremos el operador <a href="https://mariadb.com/kb/en/in/"><code>IN</code></a> con la sintaxis <code>exp1 [NOT] IN (const1 [,const2])</code></p>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-36-1"><a id="__codelineno-36-1" name="__codelineno-36-1" href="#__codelineno-36-1"></a><span class="k">SELECT</span><span class="w"> </span><span class="n">nombre</span><span class="p">,</span><span class="w"> </span><span class="n">ciudad</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">Estadio</span><span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="n">ciudad</span><span class="w"> </span><span class="k">IN</span><span class="w"> </span><span class="p">(</span><span class="s1">'Madrid'</span><span class="p">,</span><span class="w"> </span><span class="s1">'Sevilla'</span><span class="p">);</span>
</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align: left;">nombre</th>
<th style="text-align: left;">ciudad</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">Santiago Bernabeu</td>
<td style="text-align: left;">Madrid</td>
</tr>
<tr>
<td style="text-align: left;">Civitas Metropolitano</td>
<td style="text-align: left;">Madrid</td>
</tr>
<tr>
<td style="text-align: left;">Benito Villamarin</td>
<td style="text-align: left;">Sevilla</td>
</tr>
<tr>
<td style="text-align: left;">Ramon Sanchez-Pizjuan</td>
<td style="text-align: left;">Sevilla</td>
</tr>
</tbody>
</table>
<h4 id="patron-texto">Patrón texto<a class="headerlink" href="#patron-texto" title="Permanent link">¶</a></h4>
<p>Cuando tenemos campos de tipo texto, lo normal no es comparar por todo el valor exacto, sino por una subcadena existente. Para ello, usaremos el operador <a href="https://mariadb.com/kb/en/like/"><code>LIKE</code></a> acompañado de un patrón, siguiendo la sintaxis <code>columna [NOT] LIKE patrón</code>.</p>
<p>En el patrón de búsqueda, podemos emplear los comodines <code>_</code> para indicar que ocupa un carácter y <code>%</code> para cero o más caracteres.</p>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-37-1"><a id="__codelineno-37-1" name="__codelineno-37-1" href="#__codelineno-37-1"></a><span class="k">SELECT</span><span class="w"> </span><span class="n">nombre</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">Jugador</span><span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="n">nombre</span><span class="w"> </span><span class="k">LIKE</span><span class="w"> </span><span class="s1">'J%'</span><span class="w"> </span><span class="k">LIMIT</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span>
</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align: left;">nombre</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">Jude</td>
</tr>
<tr>
<td style="text-align: left;">Jules</td>
</tr>
<tr>
<td style="text-align: left;">Jan</td>
</tr>
</tbody>
</table>
<p>Expresiones regulares</p>
<p>Si la lógica a comprobar es más compleja, podemos hacer uso de expresiones regulares, mediante la cláusula <a href="https://mariadb.com/kb/en/regexp/"><code>REGEXP</code></a>. Algunos ejemplos:</p>
<ul>
<li>
<p>Jugadores cuyo nombre empieza por vocal (<code>^</code> comienza y entre corchetes ponemos todos los posibles valores, es decir, por una vocal en mayúsculas o minúsculas)</p>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-38-1"><a id="__codelineno-38-1" name="__codelineno-38-1" href="#__codelineno-38-1"></a><span class="k">SELECT</span><span class="w"> </span><span class="n">nombre</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">Jugador</span><span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="n">nombre</span><span class="w"> </span><span class="n">REGEXP</span><span class="w"> </span><span class="s1">'^[AEIOU]'</span><span class="w"> </span><span class="k">LIMIT</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span>
</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align: left;">nombre</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">Eder</td>
</tr>
<tr>
<td style="text-align: left;">Aurelien</td>
</tr>
<tr>
<td style="text-align: left;">Arda</td>
</tr>
</tbody>
</table>
</li>
<li>
<p>Equipos cuyo nombre contiene exactamente dos palabras (<code>^[^ ]+</code> una o más letras al inicio, y <code>[^ ]+$</code> una o más letras al final)</p>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-39-1"><a id="__codelineno-39-1" name="__codelineno-39-1" href="#__codelineno-39-1"></a><span class="k">SELECT</span><span class="w"> </span><span class="n">nombre</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">Equipo</span><span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="n">nombre</span><span class="w"> </span><span class="n">REGEXP</span><span class="w"> </span><span class="s1">'^[[:alpha:]]+ [[:alpha:]]+$'</span><span class="p">;</span>
</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align: left;">nombre</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">FC Barcelona</td>
</tr>
<tr>
<td style="text-align: left;">Athletic Club</td>
</tr>
<tr>
<td style="text-align: left;">Real Sociedad</td>
</tr>
<tr>
<td style="text-align: left;">Sevilla FC</td>
</tr>
<tr>
<td style="text-align: left;">Valencia CF</td>
</tr>
<tr>
<td style="text-align: left;">Villarreal CF</td>
</tr>
<tr>
<td style="text-align: left;">Girona FC</td>
</tr>
</tbody>
</table>
</li>
</ul>
<h4 id="valor-nulo">Valor nulo<a class="headerlink" href="#valor-nulo" title="Permanent link">¶</a></h4>
<p>Para comprobar si un campo contiene valores nulos (o si queremos saber si tiene algún valor, sea cual sea) usaremos el operador <a href="https://mariadb.com/kb/en/is-null/"><code>IS NULL</code></a> con la sintaxis <code>columna IS [NOT] NULL</code>:</p>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-40-1"><a id="__codelineno-40-1" name="__codelineno-40-1" href="#__codelineno-40-1"></a><span class="k">SELECT</span><span class="w"> </span><span class="n">nombre</span><span class="p">,</span><span class="w"> </span><span class="n">mentorID</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">Jugador</span><span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="n">mentorID</span><span class="w"> </span><span class="k">IS</span><span class="w"> </span><span class="k">NULL</span><span class="w"> </span><span class="k">LIMIT</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span>
</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align: left;">nombre</th>
<th style="text-align: left;">mentorID</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">Thibaut</td>
<td style="text-align: left;">NULL</td>
</tr>
<tr>
<td style="text-align: left;">Daniel</td>
<td style="text-align: left;">NULL</td>
</tr>
<tr>
<td style="text-align: left;">Eder</td>
<td style="text-align: left;">NULL</td>
</tr>
</tbody>
</table>
<h4 id="operadores-logicos">Operadores lógicos<a class="headerlink" href="#operadores-logicos" title="Permanent link">¶</a></h4>
<p>Respecto a las condiciones compuestas, podemos unir operadores mediante <code>AND</code> (conjunción), <code>OR</code> (disyunción) y <code>NOT</code> (negación).</p>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-41-1"><a id="__codelineno-41-1" name="__codelineno-41-1" href="#__codelineno-41-1"></a><span class="k">SELECT</span><span class="w"> </span><span class="n">nombre</span><span class="p">,</span><span class="w"> </span><span class="n">altura</span><span class="p">,</span><span class="w"> </span><span class="n">peso</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">Jugador</span><span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="p">(</span><span class="n">posicion</span><span class="o">=</span><span class="s1">'Delantero'</span><span class="w"> </span><span class="k">OR</span><span class="w"> </span><span class="n">posicion</span><span class="o">=</span><span class="s1">'Defensa'</span><span class="p">)</span><span class="w"> </span><span class="k">AND</span><span class="w"> </span><span class="n">altura</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">1</span><span class="p">.</span><span class="mi">90</span><span class="w"> </span><span class="k">LIMIT</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span>
</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align: left;">nombre</th>
<th style="text-align: left;">altura</th>
<th style="text-align: left;">peso</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">Alexander</td>
<td style="text-align: left;">1.95</td>
<td style="text-align: left;">90</td>
</tr>
<tr>
<td style="text-align: left;">Mikel</td>
<td style="text-align: left;">1.91</td>
<td style="text-align: left;">85</td>
</tr>
<tr>
<td style="text-align: left;">Rafa</td>
<td style="text-align: left;">1.91</td>
<td style="text-align: left;">86</td>
</tr>
</tbody>
</table>
<h5 id="prioridad-de-los-operadores">Prioridad de los operadores<a class="headerlink" href="#prioridad-de-los-operadores" title="Permanent link">¶</a></h5>
<p>Conviene recordar la <a href="https://mariadb.com/kb/en/operator-precedence/">prioridad de los operadores</a> a la hora de evaluar una expresión:</p>
<ul>
<li>Se evalúa la multiplicación (<code>*</code>) y la división (<code>/</code>) al mismo nivel.</li>
<li>A continuación sumas (<code>+</code>) y restas (<code>-</code>).</li>
<li>Todas las comparaciones (<code>&lt;</code>, <code>&gt;</code>, …).</li>
<li>Después se evalúan los operadores <code>IS NULL</code>, <code>IN</code>, <code>LIKE</code></li>
<li><code>BETWEEN</code>...</li>
<li><code>NOT</code>.</li>
<li><code>AND</code>.</li>
<li><code>OR</code>.</li>
</ul>
<div class="admonition info">
<p class="admonition-title">Cuadro resumen SELECT</p>
<table>
<thead>
<tr>
<th style="text-align: left;">Opción</th>
<th style="text-align: left;">Descripción</th>
<th style="text-align: left;">Ejemplo</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;"><code>DISTINCT</code></td>
<td style="text-align: left;">Elimina filas duplicadas del resultado</td>
<td style="text-align: left;"><code>SELECT DISTINCT posicion ...</code></td>
</tr>
<tr>
<td style="text-align: left;"><code>AS</code></td>
<td style="text-align: left;">Define un alias para una columna o tabla</td>
<td style="text-align: left;"><code>SELECT nombre AS Nombre_Completo ...</code></td>
</tr>
<tr>
<td style="text-align: left;"><code>CASE</code></td>
<td style="text-align: left;">Estructura condicional if/else dentro de la proyección</td>
<td style="text-align: left;"><code>CASE WHEN esActiva THEN 'En Curso' ELSE 'Finalizada' END</code></td>
</tr>
<tr>
<td style="text-align: left;"><code>ORDER BY</code></td>
<td style="text-align: left;">Ordena los resultados por una o más columnas</td>
<td style="text-align: left;"><code>ORDER BY añoFundacion DESC</code></td>
</tr>
<tr>
<td style="text-align: left;"><code>LIMIT</code></td>
<td style="text-align: left;">Restringe el número de filas devueltas</td>
<td style="text-align: left;"><code>LIMIT 5</code> o <code>LIMIT 5 OFFSET 10</code></td>
</tr>
<tr>
<td style="text-align: left;"><code>WHERE</code></td>
<td style="text-align: left;">Filtra filas basándose en una condición</td>
<td style="text-align: left;"><code>WHERE altura &gt; 1.90</code></td>
</tr>
<tr>
<td style="text-align: left;"><code>BETWEEN</code></td>
<td style="text-align: left;">Comprueba si un valor está dentro de un rango</td>
<td style="text-align: left;"><code>WHERE añoFundacion BETWEEN 1900 AND 1920</code></td>
</tr>
<tr>
<td style="text-align: left;"><code>IN</code></td>
<td style="text-align: left;">Comprueba si un valor coincide con una lista</td>
<td style="text-align: left;"><code>WHERE ciudad IN ('Madrid', 'Sevilla')</code></td>
</tr>
<tr>
<td style="text-align: left;"><code>LIKE</code></td>
<td style="text-align: left;">Busca un patrón de texto (<code>%</code> = varios, <code>_</code> = uno)</td>
<td style="text-align: left;"><code>WHERE nombre LIKE 'J%'</code></td>
</tr>
<tr>
<td style="text-align: left;"><code>REGEXP</code></td>
<td style="text-align: left;">Busca patrones complejos con expresiones regulares</td>
<td style="text-align: left;"><code>WHERE nombre REGEXP '^[AEIOU]'</code></td>
</tr>
<tr>
<td style="text-align: left;"><code>IS NULL</code></td>
<td style="text-align: left;">Comprueba si un valor es nulo</td>
<td style="text-align: left;"><code>WHERE mentorID IS NULL</code></td>
</tr>
<tr>
<td style="text-align: left;"><code>AND</code> / <code>OR</code> / <code>NOT</code></td>
<td style="text-align: left;">Conecta o niega condiciones lógicas</td>
<td style="text-align: left;"><code>WHERE (pos='Portero' OR pos='Defensa') AND altura &gt; 1.90</code></td>
</tr>
</tbody>
</table>
</div>
<h2 id="uniendo-tablas"><strong>Uniendo Tablas</strong><a class="headerlink" href="#uniendo-tablas" title="Permanent link">¶</a></h2>
<p>Hasta ahora nos hemos dedicaod a realizar consultas sobre uno o más atributos de una determinada tabla. El modelo relacional se basa en la relación de una o más tablas, y por lo tanto, necesitamos de un mecanismo que nos permite obtener información de tablas que están relacionadas.</p>
<p>Dicho esto, para unir varias tablas (realizar un <a href="https://mariadb.com/kb/en/join-syntax/"><em>join</em></a>) tenemos diferentes <a href="https://mariadb.com/kb/en/join-syntax/">formas</a> de hacerlo:</p>
<ul>
<li><em>cross join</em>: producto cartesiano entre dos tablas</li>
<li><em>inner join</em>: une dos tablas por campos que coinciden en valor.</li>
<li><em>natural join</em>: une dos tablas por campos que se llaman igual</li>
<li><em>outer join</em>: une dos tablas, recuperando todos los elementos que están en una de ellas y de la segunda los que coinciden en valor. En este caso, podemos distinguir entre <em>left join</em> o <em>right join</em> dependiendo que tabla es la que aporta todos los elementos.</li>
</ul>
<p>Veamos estas operaciones en detalle.</p>
<h3 id="producto-cartesiano">Producto cartesiano<a class="headerlink" href="#producto-cartesiano" title="Permanent link">¶</a></h3>
<p>El producto cartesiano (<em>cross join</em>) de dos tablas son todas las combinaciones de las filas de una tabla unidas a las filas de la otra tabla. Es decir, cada fila de A se cruza con todas las de B.</p>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-42-1"><a id="__codelineno-42-1" name="__codelineno-42-1" href="#__codelineno-42-1"></a><span class="k">SELECT</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">nombre</span><span class="p">,</span><span class="w"> </span><span class="n">en</span><span class="p">.</span><span class="n">nombre</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">Equipo</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="k">CROSS</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">Entrenador</span><span class="w"> </span><span class="n">en</span><span class="w"> </span><span class="k">LIMIT</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span>
</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align: left;">nombre</th>
<th style="text-align: left;">nombre</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">Real Madrid CF</td>
<td style="text-align: left;">Carlo</td>
</tr>
<tr>
<td style="text-align: left;">FC Barcelona</td>
<td style="text-align: left;">Carlo</td>
</tr>
<tr>
<td style="text-align: left;">Atletico de Madrid</td>
<td style="text-align: left;">Carlo</td>
</tr>
</tbody>
</table>
<p>Otra forma de expresar lo mismo es mediante <code>cross join</code>:</p>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-43-1"><a id="__codelineno-43-1" name="__codelineno-43-1" href="#__codelineno-43-1"></a><span class="k">SELECT</span><span class="w"> </span><span class="n">NomEmp</span><span class="p">,</span><span class="w"> </span><span class="n">NomDep</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">empleado</span><span class="w"> </span><span class="k">CROSS</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">departamento</span><span class="p">;</span>
</span></code></pre></div>
<h3 id="composicion-interna-inner-join">Composición interna (INNER JOIN)<a class="headerlink" href="#composicion-interna-inner-join" title="Permanent link">¶</a></h3>
<p>La operación <code>[INNER] JOIN</code> combina registros de dos tablas siempre que existan valores coincidentes en un campo común (clave ajena con clave primaria). Para ello, se indica una tabla seguida (opcionalmente con el prefijo <code>INNER</code>) de <code>JOIN</code> con la segunda tabla, y tras <code>ON</code>, igualamos la clave ajena con la primaria:</p>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-44-1"><a id="__codelineno-44-1" name="__codelineno-44-1" href="#__codelineno-44-1"></a><span class="k">SELECT</span><span class="w"> </span><span class="n">NomEmp</span><span class="p">,</span><span class="w"> </span><span class="n">NomDep</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">empleado</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">departamento</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="n">empleado</span><span class="p">.</span><span class="n">CodDep</span><span class="o">=</span><span class="n">departamento</span><span class="p">.</span><span class="n">CodDep</span><span class="p">;</span>
</span></code></pre></div>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-45-1"><a id="__codelineno-45-1" name="__codelineno-45-1" href="#__codelineno-45-1"></a><span class="k">SELECT</span><span class="w"> </span><span class="n">en</span><span class="p">.</span><span class="n">nombre</span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">nombre</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">Entrenador</span><span class="w"> </span><span class="n">en</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">Equipo</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="n">en</span><span class="p">.</span><span class="n">equipoID</span><span class="o">=</span><span class="n">e</span><span class="p">.</span><span class="n">id</span><span class="w"> </span><span class="k">LIMIT</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span>
</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align: left;">nombre</th>
<th style="text-align: left;">nombre</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">Carlo</td>
<td style="text-align: left;">Real Madrid CF</td>
</tr>
<tr>
<td style="text-align: left;">Hansi</td>
<td style="text-align: left;">FC Barcelona</td>
</tr>
<tr>
<td style="text-align: left;">Diego</td>
<td style="text-align: left;">Atletico de Madrid</td>
</tr>
</tbody>
</table>
<p>Es conveniente, y realmente más cómodo, poner un alias a las tablas (normalmente la inicial del nombre de la tabla tras el propio nombre de la misma):</p>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-46-1"><a id="__codelineno-46-1" name="__codelineno-46-1" href="#__codelineno-46-1"></a><span class="k">SELECT</span><span class="w"> </span><span class="n">en</span><span class="p">.</span><span class="n">nombre</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">Entrenador</span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">nombre</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">Equipo</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">Entrenador</span><span class="w"> </span><span class="n">en</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">Equipo</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="n">en</span><span class="p">.</span><span class="n">equipoID</span><span class="o">=</span><span class="n">e</span><span class="p">.</span><span class="n">id</span><span class="w"> </span><span class="k">LIMIT</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span>
</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align: left;">Entrenador</th>
<th style="text-align: left;">Equipo</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">Carlo</td>
<td style="text-align: left;">Real Madrid CF</td>
</tr>
<tr>
<td style="text-align: left;">Hansi</td>
<td style="text-align: left;">FC Barcelona</td>
</tr>
<tr>
<td style="text-align: left;">Diego</td>
<td style="text-align: left;">Atletico de Madrid</td>
</tr>
</tbody>
</table>
<p>En versiones antiguas de SQL era más común indicar las <a href="https://mariadb.com/kb/en/comma-vs-join/">tablas separadas por coma</a> y realizar el <em>join</em> en el <code>WHERE</code>, uniendo la clave ajena con la clave primaria de la tabla a la que referencia. Aunque a nivel funcional el resultado es el mismo, es recomendable utilizar la sintaxis <code>JOIN ... ON</code> por legibilidad, y es probable, que el optimizador de consultas del SGBD funcione mejor:</p>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-47-1"><a id="__codelineno-47-1" name="__codelineno-47-1" href="#__codelineno-47-1"></a><span class="c1">--- SQL (ejemplo de sintaxis antigua);</span>
</span><span id="__span-47-2"><a id="__codelineno-47-2" name="__codelineno-47-2" href="#__codelineno-47-2"></a><span class="k">SELECT</span><span class="w"> </span><span class="n">NomEmp</span><span class="p">,</span><span class="w"> </span><span class="n">NomDep</span><span class="w"> </span>
</span><span id="__span-47-3"><a id="__codelineno-47-3" name="__codelineno-47-3" href="#__codelineno-47-3"></a><span class="k">FROM</span><span class="w"> </span><span class="n">empleado</span><span class="w"> </span><span class="n">e</span><span class="p">,</span><span class="w"> </span><span class="n">departamento</span><span class="w"> </span><span class="n">d</span><span class="w"> </span>
</span><span id="__span-47-4"><a id="__codelineno-47-4" name="__codelineno-47-4" href="#__codelineno-47-4"></a><span class="k">WHERE</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">CodDep</span><span class="o">=</span><span class="n">d</span><span class="p">.</span><span class="n">CodDep</span><span class="p">;</span>
</span><span id="__span-47-5"><a id="__codelineno-47-5" name="__codelineno-47-5" href="#__codelineno-47-5"></a>
</span><span id="__span-47-6"><a id="__codelineno-47-6" name="__codelineno-47-6" href="#__codelineno-47-6"></a><span class="c1">--- SQL 99 (ejemplo de sintaxis moderna); </span>
</span><span id="__span-47-7"><a id="__codelineno-47-7" name="__codelineno-47-7" href="#__codelineno-47-7"></a><span class="k">SELECT</span><span class="w"> </span><span class="n">NomEmp</span><span class="p">,</span><span class="w"> </span><span class="n">NomDep</span><span class="w"> </span>
</span><span id="__span-47-8"><a id="__codelineno-47-8" name="__codelineno-47-8" href="#__codelineno-47-8"></a><span class="k">FROM</span><span class="w"> </span><span class="n">empleado</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">departamento</span><span class="w"> </span><span class="n">d</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">CodDep</span><span class="o">=</span><span class="n">d</span><span class="p">.</span><span class="n">CodDep</span><span class="p">;</span>
</span></code></pre></div>
<p>Cuando coincide el nombre de los atributos podemos emplear la cláusula <code>USING (listaDeColumnas)</code> para simplificar la consulta:</p>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-48-1"><a id="__codelineno-48-1" name="__codelineno-48-1" href="#__codelineno-48-1"></a><span class="k">SELECT</span><span class="w"> </span><span class="n">j</span><span class="p">.</span><span class="n">nombre</span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">nombre</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">Jugador</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">Equipo</span><span class="w"> </span><span class="n">e</span><span class="w"> </span>
</span><span id="__span-48-2"><a id="__codelineno-48-2" name="__codelineno-48-2" href="#__codelineno-48-2"></a><span class="k">USING</span><span class="p">(</span><span class="n">id</span><span class="p">)</span><span class="w"> </span><span class="k">LIMIT</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span>
</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align: left;">nombre</th>
<th style="text-align: left;">nombre</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">Thibaut</td>
<td style="text-align: left;">Real Madrid CF</td>
</tr>
<tr>
<td style="text-align: left;">Daniel</td>
<td style="text-align: left;">FC Barcelona</td>
</tr>
<tr>
<td style="text-align: left;">Eder</td>
<td style="text-align: left;">Atletico de Madrid</td>
</tr>
</tbody>
</table>
<blockquote>
<p><strong>Nota</strong>: En este caso, al usar <code>USING(id)</code>, estamos uniendo el Jugador con ID 1 con el Equipo con ID 1. <strong>No es una relación lógica real</strong> (Thibaut juega en el Real Madrid, pero Daniel NO juega en el Barça, juega en el Madrid, su ID es 2 y el equipo ID 1), simplemente coincide el ID. Para relaciones reales, usad <code>ON</code>.</p>
</blockquote>
<h4 id="natural-join">Natural join<a class="headerlink" href="#natural-join" title="Permanent link">¶</a></h4>
<p>Forma parte del estándar SQL desde SQL:1999, y se trata de una especialización de <code>INNER JOIN</code>, ya que simplifica la unión entre dos tablas al basarse automáticamente en las columnas con nombres coincidentes en ambas tablas.</p>
<p>La tabla resultante contiene sólo una columna por cada par de columnas con el mismo nombre.</p>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-49-1"><a id="__codelineno-49-1" name="__codelineno-49-1" href="#__codelineno-49-1"></a><span class="k">SELECT</span><span class="w"> </span><span class="n">j</span><span class="p">.</span><span class="n">nombre</span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">nombre</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">Jugador</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="k">NATURAL</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">Equipo</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="k">LIMIT</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span>
</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align: left;">nombre</th>
<th style="text-align: left;">nombre</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">Thibaut</td>
<td style="text-align: left;">Real Madrid CF</td>
</tr>
<tr>
<td style="text-align: left;">Daniel</td>
<td style="text-align: left;">FC Barcelona</td>
</tr>
<tr>
<td style="text-align: left;">Eder</td>
<td style="text-align: left;">Atletico de Madrid</td>
</tr>
</tbody>
</table>
<blockquote>
<p><strong>Nota</strong>: Al igual que con <code>USING</code>, <code>NATURAL JOIN</code> une por columnas con el mismo nombre (<code>id</code> en este caso). El resultado es sintácticamente correcto pero semánticamente erróneo para nuestra lógica de negocio.</p>
</blockquote>
<h4 id="consultas-sobre-varias-tablas-join">Consultas sobre varias tablas (JOIN)<a class="headerlink" href="#consultas-sobre-varias-tablas-join" title="Permanent link">¶</a></h4>
<p>Cuando necesitamos información que está en diferentes tablas, o necesitamos que los datos obtenidos dependan de las relaciones en las que participan, deberemos emparejar los campos que han de tener valores iguales (FKs con PKs)</p>
<p>Algunos aspectos a tener en cuenta:</p>
<ul>
<li>Pueden combinarse tantas tablas como se desee.</li>
<li>El criterio de combinación puede estar formado por más de una pareja de columnas.</li>
<li>En la cláusula <code>SELECT</code> pueden citarse columnas de ambas tablas, coincidan o no con la combinación.</li>
<li>Si hay columnas con el mismo nombre en las distintas tablas, deben identificarse especificando la tabla de procedencia o utilizando un alias de tabla.</li>
</ul>
<p>Veamos algunos ejemplos. Antes ya hemos visto cómo recuperar el nombre de los equipos donde juega cada jugador. Si también queremos obtener el nombre del estadio, necesitamos unir las tres tablas:</p>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-50-1"><a id="__codelineno-50-1" name="__codelineno-50-1" href="#__codelineno-50-1"></a><span class="k">SELECT</span><span class="w"> </span><span class="n">j</span><span class="p">.</span><span class="n">nombre</span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">nombre</span><span class="p">,</span><span class="w"> </span><span class="n">es</span><span class="p">.</span><span class="n">nombre</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">Jugador</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">Equipo</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="n">j</span><span class="p">.</span><span class="n">equipoID</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">id</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">Estadio</span><span class="w"> </span><span class="n">es</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">estadioID</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">es</span><span class="p">.</span><span class="n">id</span><span class="w"> </span><span class="k">LIMIT</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span>
</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align: left;">nombre</th>
<th style="text-align: left;">nombre</th>
<th style="text-align: left;">nombre</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">Thibaut</td>
<td style="text-align: left;">Real Madrid CF</td>
<td style="text-align: left;">Santiago Bernabeu</td>
</tr>
<tr>
<td style="text-align: left;">Daniel</td>
<td style="text-align: left;">Real Madrid CF</td>
<td style="text-align: left;">Santiago Bernabeu</td>
</tr>
<tr>
<td style="text-align: left;">Eder</td>
<td style="text-align: left;">Real Madrid CF</td>
<td style="text-align: left;">Santiago Bernabeu</td>
</tr>
</tbody>
</table>
<p>Si además, queremos el entrenador del equipo, necesitamos volver a unir con Entrenador para obtener su nombre:</p>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-51-1"><a id="__codelineno-51-1" name="__codelineno-51-1" href="#__codelineno-51-1"></a><span class="k">SELECT</span><span class="w"> </span><span class="n">j</span><span class="p">.</span><span class="n">nombre</span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">nombre</span><span class="p">,</span><span class="w"> </span><span class="n">en</span><span class="p">.</span><span class="n">nombre</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">Entrenador</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">Jugador</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">Equipo</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="n">j</span><span class="p">.</span><span class="n">equipoID</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">id</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">Entrenador</span><span class="w"> </span><span class="n">en</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="n">en</span><span class="p">.</span><span class="n">equipoID</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">id</span><span class="w"> </span><span class="k">LIMIT</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span>
</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align: left;">nombre</th>
<th style="text-align: left;">nombre</th>
<th style="text-align: left;">Entrenador</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">Thibaut</td>
<td style="text-align: left;">Real Madrid CF</td>
<td style="text-align: left;">Carlo</td>
</tr>
<tr>
<td style="text-align: left;">Daniel</td>
<td style="text-align: left;">Real Madrid CF</td>
<td style="text-align: left;">Carlo</td>
</tr>
<tr>
<td style="text-align: left;">Eder</td>
<td style="text-align: left;">Real Madrid CF</td>
<td style="text-align: left;">Carlo</td>
</tr>
</tbody>
</table>
<p>En todo momento, podemos añadir filtros sobre una composición. Por ejemplo, recuperaremos los nombres de los jugadores y equipos, de aquellos equipos fundados antes de 1900:</p>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-52-1"><a id="__codelineno-52-1" name="__codelineno-52-1" href="#__codelineno-52-1"></a><span class="k">SELECT</span><span class="w"> </span><span class="n">j</span><span class="p">.</span><span class="n">nombre</span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">nombre</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">Jugador</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">Equipo</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="n">j</span><span class="p">.</span><span class="n">equipoID</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">id</span><span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">añoFundacion</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">1900</span><span class="w"> </span><span class="k">LIMIT</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span>
</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align: left;">nombre</th>
<th style="text-align: left;">nombre</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">Marc-Andre</td>
<td style="text-align: left;">FC Barcelona</td>
</tr>
<tr>
<td style="text-align: left;">Pau</td>
<td style="text-align: left;">FC Barcelona</td>
</tr>
<tr>
<td style="text-align: left;">Alejandro</td>
<td style="text-align: left;">FC Barcelona</td>
</tr>
</tbody>
</table>
<h4 id="composicion-reflexiva">Composición reflexiva<a class="headerlink" href="#composicion-reflexiva" title="Permanent link">¶</a></h4>
<p>Cuando tenemos una relación reflexiva de una tabla consigo misma, para obtener los datos, hemos de realizar una join de la tabla con otra instancia de sí misma.</p>
<p>Por ejemplo, en la tabla <code>Jugador</code>, la columna <code>mentorID</code> referencia al jugador que le hace de mentor; aquellos que tenga como valor <code>NULL</code>, no tienen mentor y podríamos decir que son jugadores experimentados.</p>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-53-1"><a id="__codelineno-53-1" name="__codelineno-53-1" href="#__codelineno-53-1"></a><span class="k">SELECT</span><span class="w"> </span><span class="n">nombre</span><span class="p">,</span><span class="w"> </span><span class="n">mentorID</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">Jugador</span><span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="n">mentorID</span><span class="w"> </span><span class="k">IS</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="w"> </span><span class="k">LIMIT</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span>
</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align: left;">nombre</th>
<th style="text-align: left;">mentorID</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">Arda</td>
<td style="text-align: left;">9</td>
</tr>
<tr>
<td style="text-align: left;">Endrick</td>
<td style="text-align: left;">6</td>
</tr>
<tr>
<td style="text-align: left;">Inaki</td>
<td style="text-align: left;">16</td>
</tr>
</tbody>
</table>
<p>Así pues, si queremos recuperar todos los pupilos, así como el nombre de su mentor necesitamos referencias a la tabla <code>Jugador</code> mediante un <em>join</em> consigo misma. Para ello, es imperativo utilizar un alias descriptivo para identificar el rol de la tabla en cada caso (en nuestro caso, <code>j</code> como jugador (pupilo) y <code>m</code> para los mentores):</p>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-54-1"><a id="__codelineno-54-1" name="__codelineno-54-1" href="#__codelineno-54-1"></a><span class="k">SELECT</span><span class="w"> </span><span class="n">j</span><span class="p">.</span><span class="n">nombre</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">Jugador</span><span class="p">,</span><span class="w"> </span><span class="n">m</span><span class="p">.</span><span class="n">nombre</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">Mentor</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">Jugador</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">Jugador</span><span class="w"> </span><span class="n">m</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="n">j</span><span class="p">.</span><span class="n">mentorID</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">m</span><span class="p">.</span><span class="n">id</span><span class="w"> </span><span class="k">LIMIT</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span>
</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align: left;">Jugador</th>
<th style="text-align: left;">Mentor</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">Arda</td>
<td style="text-align: left;">Kylian</td>
</tr>
<tr>
<td style="text-align: left;">Endrick</td>
<td style="text-align: left;">Vinicius</td>
</tr>
<tr>
<td style="text-align: left;">Inaki</td>
<td style="text-align: left;">Nahuel</td>
</tr>
</tbody>
</table>
<h3 id="composicion-externa">Composición externa<a class="headerlink" href="#composicion-externa" title="Permanent link">¶</a></h3>
<p>Cuando efectuamos una combinación interna los registros que se quedan sin emparejar en la otra tabla no aparecen en el resultado.</p>
<p>En ocasiones no queremos únicamente los registros que están conectados, sino que nos interesa recuperarlos todos (conectados y no conectados) y de los conectados, sus datos. En otras ocasiones, queremos recuperar todos los que no están conectados... Para ello, necesitamos hacer uso de las composiciones externas.</p>
<p>Mediante una combinación externa, aparecerán los datos emparejados más los que no están relacionados, ya sea por la:</p>
<ul>
<li>Izquierda: <code>LEFT [OUTER] JOIN</code> – Todos los de la tabla de la izquierda, y de la derecha los relacionados.</li>
<li>Derecha: <code>RIGHT [OUTER] JOIN</code> – Los de la izquierda los relacionados, y de la derecha todos los datos.</li>
</ul>
<p>Veamos con un ejemplo qué datos obtenemos. Primero realizamos un <em>join</em> entre jugadores y sus estadísticas de partido para obtener los jugadores que han jugado (obtenemos registros repetidos por jugador si han jugado más de un partido):</p>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-55-1"><a id="__codelineno-55-1" name="__codelineno-55-1" href="#__codelineno-55-1"></a><span class="k">SELECT</span><span class="w"> </span><span class="n">j</span><span class="p">.</span><span class="n">nombre</span><span class="p">,</span><span class="w"> </span><span class="n">ep</span><span class="p">.</span><span class="n">goles</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">Jugador</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">EstadisticaPartido</span><span class="w"> </span><span class="n">ep</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="n">j</span><span class="p">.</span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ep</span><span class="p">.</span><span class="n">jugadorID</span><span class="w"> </span><span class="k">LIMIT</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span>
</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align: left;">nombre</th>
<th style="text-align: left;">goles</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">Robert</td>
<td style="text-align: left;">2</td>
</tr>
<tr>
<td style="text-align: left;">Lamine</td>
<td style="text-align: left;">0</td>
</tr>
<tr>
<td style="text-align: left;">Hugo</td>
<td style="text-align: left;">1</td>
</tr>
</tbody>
</table>
<p>Si en cambio queremos recuperar todos los jugadores, y si han jugado, sus estadísticas, haríamos un <em>left join</em>. Ahora se muestran todos los jugadores, y además, aquel que tenga estadísticas, aparecerá tantas veces como partidos haya jugado. En cambio, de los que no han jugado aparecerá <code>NULL</code> en las columnas correspondientes:</p>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-56-1"><a id="__codelineno-56-1" name="__codelineno-56-1" href="#__codelineno-56-1"></a><span class="k">SELECT</span><span class="w"> </span><span class="n">j</span><span class="p">.</span><span class="n">nombre</span><span class="p">,</span><span class="w"> </span><span class="n">ep</span><span class="p">.</span><span class="n">goles</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">Jugador</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="k">LEFT</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">EstadisticaPartido</span><span class="w"> </span><span class="n">ep</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="n">j</span><span class="p">.</span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ep</span><span class="p">.</span><span class="n">jugadorID</span><span class="w"> </span><span class="k">LIMIT</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span>
</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align: left;">nombre</th>
<th style="text-align: left;">goles</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">Thibaut</td>
<td style="text-align: left;">NULL</td>
</tr>
<tr>
<td style="text-align: left;">Daniel</td>
<td style="text-align: left;">NULL</td>
</tr>
<tr>
<td style="text-align: left;">Eder</td>
<td style="text-align: left;">NULL</td>
</tr>
</tbody>
</table>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-57-1"><a id="__codelineno-57-1" name="__codelineno-57-1" href="#__codelineno-57-1"></a><span class="k">SELECT</span><span class="w"> </span><span class="n">j</span><span class="p">.</span><span class="n">nombre</span><span class="p">,</span><span class="w"> </span><span class="n">ep</span><span class="p">.</span><span class="n">goles</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">Jugador</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="k">RIGHT</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">EstadisticaPartido</span><span class="w"> </span><span class="n">ep</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="n">j</span><span class="p">.</span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ep</span><span class="p">.</span><span class="n">jugadorID</span><span class="w"> </span><span class="k">LIMIT</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span>
</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align: left;">nombre</th>
<th style="text-align: left;">goles</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">Robert</td>
<td style="text-align: left;">2</td>
</tr>
<tr>
<td style="text-align: left;">Lamine</td>
<td style="text-align: left;">0</td>
</tr>
<tr>
<td style="text-align: left;">Hugo</td>
<td style="text-align: left;">1</td>
</tr>
</tbody>
</table>
<p>No obstante, si cambiamos el orden de las tablas en el <em>join</em>, sí que tiene sentido hacer un <em>right join</em>:</p>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-58-1"><a id="__codelineno-58-1" name="__codelineno-58-1" href="#__codelineno-58-1"></a><span class="k">SELECT</span><span class="w"> </span><span class="n">j</span><span class="p">.</span><span class="n">nombre</span><span class="p">,</span><span class="w"> </span><span class="n">ep</span><span class="p">.</span><span class="n">goles</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">EstadisticaPartido</span><span class="w"> </span><span class="n">ep</span><span class="w"> </span><span class="k">RIGHT</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">Jugador</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="n">j</span><span class="p">.</span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ep</span><span class="p">.</span><span class="n">jugadorID</span><span class="w"> </span><span class="k">LIMIT</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span>
</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align: left;">nombre</th>
<th style="text-align: left;">goles</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">Thibaut</td>
<td style="text-align: left;">NULL</td>
</tr>
<tr>
<td style="text-align: left;">Daniel</td>
<td style="text-align: left;">NULL</td>
</tr>
<tr>
<td style="text-align: left;">Eder</td>
<td style="text-align: left;">NULL</td>
</tr>
</tbody>
</table>
<p>¿Y si tenemos tres tablas? Vamos a unir las estadísticas de los jugadores con los partidos (seguimos recuperando registros de jugadores que han jugado):</p>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-59-1"><a id="__codelineno-59-1" name="__codelineno-59-1" href="#__codelineno-59-1"></a><span class="k">SELECT</span><span class="w"> </span><span class="n">j</span><span class="p">.</span><span class="n">nombre</span><span class="p">,</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">codigo</span><span class="p">,</span><span class="w"> </span><span class="n">ep</span><span class="p">.</span><span class="n">goles</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">Jugador</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">EstadisticaPartido</span><span class="w"> </span><span class="n">ep</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="n">j</span><span class="p">.</span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ep</span><span class="p">.</span><span class="n">jugadorID</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">Partido</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="n">ep</span><span class="p">.</span><span class="n">partidoID</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">id</span><span class="p">;</span>
</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align: left;">nombre</th>
<th style="text-align: left;">codigo</th>
<th style="text-align: left;">goles</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">Robert</td>
<td style="text-align: left;">P2425-04</td>
<td style="text-align: left;">2</td>
</tr>
<tr>
<td style="text-align: left;">Lamine</td>
<td style="text-align: left;">P2425-04</td>
<td style="text-align: left;">0</td>
</tr>
<tr>
<td style="text-align: left;">Hugo</td>
<td style="text-align: left;">P2425-04</td>
<td style="text-align: left;">1</td>
</tr>
</tbody>
</table>
<p>Si quiero recuperar todos los jugadores y los datos del partido si han jugado, tenemos que hacer un <em>left join</em>:</p>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-60-1"><a id="__codelineno-60-1" name="__codelineno-60-1" href="#__codelineno-60-1"></a><span class="k">SELECT</span><span class="w"> </span><span class="n">j</span><span class="p">.</span><span class="n">nombre</span><span class="p">,</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">codigo</span><span class="p">,</span><span class="w"> </span><span class="n">ep</span><span class="p">.</span><span class="n">goles</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">Jugador</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="k">LEFT</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">EstadisticaPartido</span><span class="w"> </span><span class="n">ep</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="n">j</span><span class="p">.</span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ep</span><span class="p">.</span><span class="n">jugadorID</span><span class="w"> </span><span class="k">LEFT</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">Partido</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="n">ep</span><span class="p">.</span><span class="n">partidoID</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">id</span><span class="w"> </span><span class="k">LIMIT</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span>
</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align: left;">nombre</th>
<th style="text-align: left;">codigo</th>
<th style="text-align: left;">goles</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">Thibaut</td>
<td style="text-align: left;">NULL</td>
<td style="text-align: left;">NULL</td>
</tr>
<tr>
<td style="text-align: left;">Daniel</td>
<td style="text-align: left;">NULL</td>
<td style="text-align: left;">NULL</td>
</tr>
<tr>
<td style="text-align: left;">Eder</td>
<td style="text-align: left;">NULL</td>
<td style="text-align: left;">NULL</td>
</tr>
</tbody>
</table>
<p>¿Qué ha pasado? ¿Por qué faltan registros? Al realizar el segundo <em>join</em>, ha eliminado aquellos registros que tienen el <code>partidoID</code> nulo (porque el join con Partido exige coincidencia).</p>
<p>Pero ¿cómo lo solucionamos? Primero vamos a unir los partidos y estadísticas, y luego hacemos el <em>join</em> por la derecha con todos los jugadores:</p>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-61-1"><a id="__codelineno-61-1" name="__codelineno-61-1" href="#__codelineno-61-1"></a><span class="k">SELECT</span><span class="w"> </span><span class="n">j</span><span class="p">.</span><span class="n">nombre</span><span class="p">,</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">codigo</span><span class="p">,</span><span class="w"> </span><span class="n">ep</span><span class="p">.</span><span class="n">goles</span><span class="w"> </span>
</span><span id="__span-61-2"><a id="__codelineno-61-2" name="__codelineno-61-2" href="#__codelineno-61-2"></a><span class="k">FROM</span><span class="w"> </span><span class="n">Jugador</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="k">RIGHT</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">EstadisticaPartido</span><span class="w"> </span><span class="n">ep</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="n">j</span><span class="p">.</span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ep</span><span class="p">.</span><span class="n">jugadorID</span><span class="w"> </span>
</span><span id="__span-61-3"><a id="__codelineno-61-3" name="__codelineno-61-3" href="#__codelineno-61-3"></a><span class="k">LEFT</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">Partido</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="n">ep</span><span class="p">.</span><span class="n">partidoID</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">id</span><span class="p">;</span>
</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align: left;">nombre</th>
<th style="text-align: left;">codigo</th>
<th style="text-align: left;">goles</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">Robert</td>
<td style="text-align: left;">P2425-04</td>
<td style="text-align: left;">2</td>
</tr>
<tr>
<td style="text-align: left;">Lamine</td>
<td style="text-align: left;">P2425-04</td>
<td style="text-align: left;">0</td>
</tr>
<tr>
<td style="text-align: left;">Hugo</td>
<td style="text-align: left;">P2425-04</td>
<td style="text-align: left;">1</td>
</tr>
</tbody>
</table>
<p>Veamos otro ejemplo. Ahora quiero recuperar todas las estadísticas, y si lo hay, el jugador al que pertenecen. En este caso, pongo a la izquierda las estadísticas y hago dos <em>left joins</em>:</p>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-62-1"><a id="__codelineno-62-1" name="__codelineno-62-1" href="#__codelineno-62-1"></a><span class="k">SELECT</span><span class="w"> </span><span class="n">j</span><span class="p">.</span><span class="n">nombre</span><span class="p">,</span><span class="w"> </span><span class="n">ep</span><span class="p">.</span><span class="n">goles</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">EstadisticaPartido</span><span class="w"> </span><span class="n">ep</span><span class="w"> </span>
</span><span id="__span-62-2"><a id="__codelineno-62-2" name="__codelineno-62-2" href="#__codelineno-62-2"></a><span class="k">LEFT</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">Jugador</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="n">ep</span><span class="p">.</span><span class="n">jugadorID</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">j</span><span class="p">.</span><span class="n">id</span><span class="w"> </span>
</span><span id="__span-62-3"><a id="__codelineno-62-3" name="__codelineno-62-3" href="#__codelineno-62-3"></a><span class="k">LIMIT</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span>
</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align: left;">nombre</th>
<th style="text-align: left;">goles</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">Robert</td>
<td style="text-align: left;">2</td>
</tr>
<tr>
<td style="text-align: left;">Lamine</td>
<td style="text-align: left;">0</td>
</tr>
<tr>
<td style="text-align: left;">Hugo</td>
<td style="text-align: left;">1</td>
</tr>
</tbody>
</table>
<p>La misma consulta con sólo una consulta externa sería:</p>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-63-1"><a id="__codelineno-63-1" name="__codelineno-63-1" href="#__codelineno-63-1"></a><span class="k">SELECT</span><span class="w"> </span><span class="n">j</span><span class="p">.</span><span class="n">nombre</span><span class="p">,</span><span class="w"> </span><span class="n">ep</span><span class="p">.</span><span class="n">goles</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">EstadisticaPartido</span><span class="w"> </span><span class="n">ep</span><span class="w"> </span><span class="k">RIGHT</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">Jugador</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="n">ep</span><span class="p">.</span><span class="n">jugadorID</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">j</span><span class="p">.</span><span class="n">id</span><span class="w"> </span><span class="k">LIMIT</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span>
</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align: left;">nombre</th>
<th style="text-align: left;">goles</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">Thibaut</td>
<td style="text-align: left;">NULL</td>
</tr>
<tr>
<td style="text-align: left;">Daniel</td>
<td style="text-align: left;">NULL</td>
</tr>
<tr>
<td style="text-align: left;">Eder</td>
<td style="text-align: left;">NULL</td>
</tr>
</tbody>
</table>
<h4 id="antijoin">Antijoin<a class="headerlink" href="#antijoin" title="Permanent link">¶</a></h4>
<p>Se conoce como <em>antijoin</em> los registros obtenidos de una tabla que no se combinan con otra. Es decir, son los registros que no se seleccionan al realizar un <em>inner join</em>, y de ahí el prefijo <em>anti</em>.</p>
<p>Para aprender su uso, vamos a recuperar los jugadores que no han jugado ningún partido:</p>
<p><a class="glightbox" data-type="image" data-width="100%" data-height="auto" href="images/06antijoin.png" data-desc-position="bottom"><img alt="" src="images/06antijoin.png" title="Antijoin entre jugadores sin jugar"></a></p>
<p>Antijoin entre jugadores sin jugar</p>
<p>Pero antes, volvamos al ejemplo anterior donde obteníamos los jugadores que han jugado:</p>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-64-1"><a id="__codelineno-64-1" name="__codelineno-64-1" href="#__codelineno-64-1"></a><span class="k">SELECT</span><span class="w"> </span><span class="n">j</span><span class="p">.</span><span class="n">nombre</span><span class="p">,</span><span class="w"> </span><span class="n">ep</span><span class="p">.</span><span class="n">goles</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">Jugador</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">EstadisticaPartido</span><span class="w"> </span><span class="n">ep</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="n">j</span><span class="p">.</span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ep</span><span class="p">.</span><span class="n">jugadorID</span><span class="w"> </span><span class="k">LIMIT</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span>
</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align: left;">nombre</th>
<th style="text-align: left;">goles</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">Robert</td>
<td style="text-align: left;">2</td>
</tr>
<tr>
<td style="text-align: left;">Lamine</td>
<td style="text-align: left;">0</td>
</tr>
<tr>
<td style="text-align: left;">Hugo</td>
<td style="text-align: left;">1</td>
</tr>
</tbody>
</table>
<p>¿Y cómo hago para obtener los jugadores que no han jugado? Si realizamos un <em>join</em> por la izquierda, sí que aparecerán los jugadores que no han jugado (además de los que sí):</p>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-65-1"><a id="__codelineno-65-1" name="__codelineno-65-1" href="#__codelineno-65-1"></a><span class="k">SELECT</span><span class="w"> </span><span class="n">j</span><span class="p">.</span><span class="n">nombre</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">Jugador</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="k">LEFT</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">EstadisticaPartido</span><span class="w"> </span><span class="n">ep</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="n">j</span><span class="p">.</span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ep</span><span class="p">.</span><span class="n">jugadorID</span><span class="w"> </span><span class="k">LIMIT</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span>
</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align: left;">nombre</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">Thibaut</td>
</tr>
<tr>
<td style="text-align: left;">Daniel</td>
</tr>
<tr>
<td style="text-align: left;">Eder</td>
</tr>
</tbody>
</table>
<p>Así pues, si sobre el <em>left join</em>, nos quedamos con los que tienen la clave primaria referenciada nula, obtendremos justo los jugadores que no han jugado (operación que se conoce como <em>anti-join</em>):</p>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-66-1"><a id="__codelineno-66-1" name="__codelineno-66-1" href="#__codelineno-66-1"></a><span class="k">SELECT</span><span class="w"> </span><span class="n">j</span><span class="p">.</span><span class="n">nombre</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">Jugador</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="k">LEFT</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">EstadisticaPartido</span><span class="w"> </span><span class="n">ep</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="n">j</span><span class="p">.</span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ep</span><span class="p">.</span><span class="n">jugadorID</span><span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="n">ep</span><span class="p">.</span><span class="n">partidoID</span><span class="w"> </span><span class="k">IS</span><span class="w"> </span><span class="k">NULL</span><span class="w"> </span><span class="k">LIMIT</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span>
</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align: left;">nombre</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">Thibaut</td>
</tr>
<tr>
<td style="text-align: left;">Daniel</td>
</tr>
<tr>
<td style="text-align: left;">Eder</td>
</tr>
</tbody>
</table>
<h4 id="full-outer-join">Full Outer Join<a class="headerlink" href="#full-outer-join" title="Permanent link">¶</a></h4>
<p>Aunque no está soportado por <em>MariaDB</em>, conviene conocer la combinación externa completa, aunque su uso es muy limitado (por la propia restricción de integridad referencial). Su resultado presenta los resultados de la tabla de la izquierda y de la tabla de la derecha aunque no tengan correspondencia en la otra tabla.</p>
<p>Es decir, la tabla combinada contendrá entonces todos los registros de ambas tablas y presentará valores nulos para registros sin pareja.</p>
<p>Si necesitamos dicho resultado, podemos simularlo haciendo una unión entre un <em>left join</em> y un <em>right join</em>. De esta manera obtendríamos todos los registros de T1 y los valores de T2 relacionados o nulos en los que no, y en una segunda consulta, los valores de T1 relacionados o nulos en los que no, y todos los valores de T2:</p>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-67-1"><a id="__codelineno-67-1" name="__codelineno-67-1" href="#__codelineno-67-1"></a><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">t1</span><span class="w"> </span><span class="k">LEFT</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">t2</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="n">t1</span><span class="p">.</span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">t2</span><span class="p">.</span><span class="n">id</span><span class="w"> </span>
</span><span id="__span-67-2"><a id="__codelineno-67-2" name="__codelineno-67-2" href="#__codelineno-67-2"></a><span class="k">UNION</span><span class="w"> </span>
</span><span id="__span-67-3"><a id="__codelineno-67-3" name="__codelineno-67-3" href="#__codelineno-67-3"></a><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">t1</span><span class="w"> </span><span class="k">RIGHT</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">t2</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="n">t1</span><span class="p">.</span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">t2</span><span class="p">.</span><span class="n">id</span>
</span></code></pre></div>
<div class="admonition info">
<p class="admonition-title">Resumen de Joins</p>
<table>
<thead>
<tr>
<th style="text-align: left;">Tipo de Join</th>
<th style="text-align: left;">Descripción</th>
<th style="text-align: left;">Ejemplo</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;"><code>CROSS JOIN</code></td>
<td style="text-align: left;">Producto cartesiano (combina todas las filas de A con todas las de B)</td>
<td style="text-align: left;"><code>Equipo CROSS JOIN Entrenador</code></td>
</tr>
<tr>
<td style="text-align: left;"><code>INNER JOIN</code></td>
<td style="text-align: left;">Devuelve sólo las filas donde hay coincidencia en ambas tablas</td>
<td style="text-align: left;"><code>Jugador JOIN Equipo ON ...</code></td>
</tr>
<tr>
<td style="text-align: left;"><code>NATURAL JOIN</code></td>
<td style="text-align: left;">Join automático (<code>INNER</code>) por columnas con el mismo nombre</td>
<td style="text-align: left;"><code>Jugador NATURAL JOIN Equipo</code></td>
</tr>
<tr>
<td style="text-align: left;"><code>LEFT JOIN</code></td>
<td style="text-align: left;">Devuelve todas las filas de la izquierda (A), y las coincidentes de la derecha (B) o NULL</td>
<td style="text-align: left;"><code>Jugador LEFT JOIN Estadistica ...</code></td>
</tr>
<tr>
<td style="text-align: left;"><code>RIGHT JOIN</code></td>
<td style="text-align: left;">Devuelve todas las filas de la derecha (B), y las coincidentes de la izquierda (A) o NULL</td>
<td style="text-align: left;"><code>Estadistica RIGHT JOIN Jugador ...</code></td>
</tr>
</tbody>
</table>
</div>
<h3 id="operadores-de-conjuntos">Operadores de conjuntos<a class="headerlink" href="#operadores-de-conjuntos" title="Permanent link">¶</a></h3>
<p>Los operadores de conjuntos no operan sobre tipos de datos simples, sino sobre los resultados de dos o más consultas, las cuales deben tener la misma estructura, es decir, que la cantidad y los tipos de datos deben ser los mismos.</p>
<p>Los operadores de conjuntos son:</p>
<ul>
<li><a href="https://mariadb.com/kb/en/union/"><code>UNION</code></a>: Devuelve el conjunto de filas resultante de la unión de las dos consultas, sin duplicados.</li>
<li><code>UNION ALL</code>: Devuelve el conjunto de filas resultante de la unión de las dos consultas, incluyendo los duplicados.</li>
<li><a href="https://mariadb.com/kb/en/intersect/"><code>INTERSECT</code></a>: Devuelve la intersección entre los dos conjuntos de filas.</li>
<li><a href="https://mariadb.com/kb/en/except/"><code>EXCEPT</code></a>: Devuelve todas aquellas filas de la primera consulta que no estén en la segunda.</li>
</ul>
<p><a class="glightbox" data-type="image" data-width="100%" data-height="auto" href="img/06union.png" data-desc-position="bottom"><img align="center" alt="" src="img/06union.png" title="Operadores de conjuntos"></a></p>
<p>Veamos unos ejemplos sobre:</p>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-68-1"><a id="__codelineno-68-1" name="__codelineno-68-1" href="#__codelineno-68-1"></a><span class="k">SELECT</span><span class="w"> </span><span class="n">nombre</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">Equipo</span><span class="w"> </span>
</span><span id="__span-68-2"><a id="__codelineno-68-2" name="__codelineno-68-2" href="#__codelineno-68-2"></a><span class="k">UNION</span><span class="w"> </span>
</span><span id="__span-68-3"><a id="__codelineno-68-3" name="__codelineno-68-3" href="#__codelineno-68-3"></a><span class="k">SELECT</span><span class="w"> </span><span class="n">nombre</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">Estadio</span><span class="w"> </span><span class="k">LIMIT</span><span class="w"> </span><span class="mi">5</span><span class="p">;</span>
</span></code></pre></div>
<h2 id="referencias">Referencias<a class="headerlink" href="#referencias" title="Permanent link">¶</a></h2>
<ul>
<li>
<p>Sintaxis SQL oficial de <a href="https://www.postgresql.org/docs/current/sql-commands.html">PostgreSQL</a> y <a href="https://mariadb.com/kb/en/sql-statements/">MariaDB</a>.</p>
</li>
<li>
<p><em>Cheatsheets</em> de <a href="https://learnsql.com/">https://learnsql.com/</a> sobre:</p>
<ul>
<li><a href="https://learnsql.com/blog/sql-basics-cheat-sheet/sql-basics-cheat-sheet-a4.pdf">SQL Básico</a></li>
<li><a href="https://learnsql.com/blog/standard-sql-functions-cheat-sheet/standard-sql-functions-cheat-sheet-a4.pdf">Funciones SQL</a></li>
<li><a href="https://learnsql.com/blog/sql-join-cheat-sheet/joins-cheat-sheet-a4.pdf"><em>Joins</em> SQL</a></li>
</ul>
</li>
<li>
<p>Materiales sobre el módulo de BD:</p>
<ul>
<li><em>Consultes de selecció <a href="https://ioc.xtec.cat/materials/FP/Recursos/fp_dam_m02_/web/fp_dam_m02_htmlindex/WebContent/u4/a1/continguts.html">simple</a> i <a href="https://ioc.xtec.cat/materials/FP/Recursos/fp_dam_m02_/web/fp_dam_m02_htmlindex/WebContent/u4/a2/continguts.html">complexes</a> - Institut Obert de Catalunya</em>.</li>
<li>Consultas <a href="https://josejuansanchez.org/bd/unidad-05-teoria/index.html">sobre una tabla</a>, sobre <a href="https://josejuansanchez.org/bd/unidad-06-teoria/index.html">varias tablas con composición interna</a>, y con <a href="https://josejuansanchez.org/bd/unidad-07-teoria/index.html">varias tablas con composición externa</a> de <em>José Juan Sánchez</em>.</li>
<li><a href="https://jorgesanchez.net/manuales/sql/intro-sql-sql2016.html">Introducción a SQL</a>.</li>
<li><a href="https://apuntes-daw.javiergutierrez.trade/bases-de-datos/ut4/recopila.html">Realización de consultas</a> de <em>Javier Gutiérrez</em>.</li>
<li><a href="https://gestionbasesdatos.readthedocs.io/es/latest/Tema4/index.html">Consulta de bases de datos</a> de gestionbasesdatos.readthedocs.io</li>
<li><a href="https://www.cs.us.es/cursos/bd-2023/temas/BD-Tema-5.pdf">Introducción a SQL</a>, por <em>Luis Valencia</em> y <em>David Orellana</em>, de la <em>Universidad de Sevilla</em>.</li>
</ul>
</li>
</ul>












                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"></path></svg>
  Volver al principio
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      2025-2026 Jesús García - Licencia CC BY-NC-SA
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        
<div class="md-social">
  
    
    
    
    
    <a href="mailto:&lt;jssgarcia.docente@gmail.com&gt;" target="_blank" rel="noopener" title="" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 12.13c-.15.01-.29.06-.39.17l-1 1 2.05 2 1-1c.22-.21.22-.56 0-.77l-1.24-1.23a.56.56 0 0 0-.38-.17m-2 1.75L13 19.94V22h2.06l6.06-6.07M20 4H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h7v-.89l8.24-8.22c.47-.49 1.12-.76 1.8-.76.34 0 .68.06 1 .19V6c0-1.12-.92-2-2.04-2m0 4-8 5-8-5V6l8 5 8-5"></path></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../..", "features": ["header.autohide", "content.tabs.link", "content.code.copy", "content.code.select", "navigation.top", "navigation.path", "content.code.annotate", "content.tooltips"], "search": "../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copiado al portapapeles", "clipboard.copy": "Copiar al portapapeles", "search.result.more.one": "1 m\u00e1s en esta p\u00e1gina", "search.result.more.other": "# m\u00e1s en esta p\u00e1gina", "search.result.none": "No se encontraron documentos", "search.result.one": "1 documento encontrado", "search.result.other": "# documentos encontrados", "search.result.placeholder": "Teclee para comenzar b\u00fasqueda", "search.result.term.missing": "Falta", "select.version": "Seleccionar versi\u00f3n"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.79ae519e.min.js"></script>
      
    
  
<script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(()=>{ lightbox.reload(); });
</script></body></html>